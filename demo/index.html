<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>arborium - Syntax Highlighting Demo</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path fill='%23cba6f7' d='m88.9248123 48.5812683c0 11.6753769-9.468483 21.1437912-21.1439285 21.1437912h-12.9468384l2.1543617 27.7749405h-13.9768142l2.1543617-27.8800049h-12.9468422c-11.6754398 0-21.1439209-9.4684792-21.1439209-21.1437912 0-9.678669 6.5259514-17.7809505 15.3640556-20.3030987-.1051903-.746151-.1051903-1.3766575-.1051903-2.0071621.0000001-13.0415144 10.6245575-23.6659431 23.6659432-23.6659431s23.6659393 10.6244287 23.6659393 23.6659431c0 .735569-.1051865 1.3766575-.1051865 2.0071621 8.8381043 2.5221482 15.3640595 10.6244297 15.3640595 20.4081631z'/></svg>">
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@2/dist/iconify-icon.min.js"></script>
    <style>
        /* Theme variables */
        :root {
            /* Catppuccin Mocha (dark) - default */
            --bg: #1e1e2e;
            --fg: #cdd6f4;
            --surface: #313244;
            --accent: #89b4fa;
            --muted: #6c7086;
            --tag-prog: #89b4fa;
            --tag-markup: #a6e3a1;
            --tag-config: #f9e2af;
            --tag-data: #fab387;
            --tag-shell: #94e2d5;
            --tag-query: #cba6f7;
        }

        [data-theme="latte"] {
            /* Catppuccin Latte (light) */
            --bg: #eff1f5;
            --fg: #4c4f69;
            --surface: #e6e9ef;
            --accent: #1e66f5;
            --muted: #9ca0b0;
            --tag-prog: #1e66f5;
            --tag-markup: #40a02b;
            --tag-config: #df8e1d;
            --tag-data: #fe640b;
            --tag-shell: #179299;
            --tag-query: #8839ef;
        }

        [data-theme="frappe"] {
            /* Catppuccin Frapp√© */
            --bg: #303446;
            --fg: #c6d0f5;
            --surface: #414559;
            --accent: #8caaee;
            --muted: #737994;
            --tag-prog: #8caaee;
            --tag-markup: #a6d189;
            --tag-config: #e5c890;
            --tag-data: #ef9f76;
            --tag-shell: #81c8be;
            --tag-query: #ca9ee6;
        }

        [data-theme="macchiato"] {
            /* Catppuccin Macchiato */
            --bg: #24273a;
            --fg: #cad3f5;
            --surface: #363a4f;
            --accent: #8aadf4;
            --muted: #6e738d;
            --tag-prog: #8aadf4;
            --tag-markup: #a6da95;
            --tag-config: #eed49f;
            --tag-data: #f5a97f;
            --tag-shell: #8bd5ca;
            --tag-query: #c6a0f6;
        }

        [data-theme="tokyo-night"] {
            /* Tokyo Night */
            --bg: #1a1b26;
            --fg: #a9b1d6;
            --surface: #24283b;
            --accent: #7aa2f7;
            --muted: #565f89;
            --tag-prog: #7aa2f7;
            --tag-markup: #9ece6a;
            --tag-config: #e0af68;
            --tag-data: #ff9e64;
            --tag-shell: #73daca;
            --tag-query: #bb9af7;
        }

        [data-theme="dracula"] {
            /* Dracula */
            --bg: #282a36;
            --fg: #f8f8f2;
            --surface: #44475a;
            --accent: #bd93f9;
            --muted: #6272a4;
            --tag-prog: #8be9fd;
            --tag-markup: #50fa7b;
            --tag-config: #f1fa8c;
            --tag-data: #ffb86c;
            --tag-shell: #8be9fd;
            --tag-query: #bd93f9;
        }

        [data-theme="monokai"] {
            /* Monokai Pro */
            --bg: #2d2a2e;
            --fg: #fcfcfa;
            --surface: #403e41;
            --accent: #ffd866;
            --muted: #727072;
            --tag-prog: #78dce8;
            --tag-markup: #a9dc76;
            --tag-config: #ffd866;
            --tag-data: #fc9867;
            --tag-shell: #78dce8;
            --tag-query: #ab9df2;
        }

        [data-theme="github-dark"] {
            /* GitHub Dark */
            --bg: #0d1117;
            --fg: #c9d1d9;
            --surface: #161b22;
            --accent: #58a6ff;
            --muted: #8b949e;
            --tag-prog: #79c0ff;
            --tag-markup: #7ee787;
            --tag-config: #d29922;
            --tag-data: #ffa657;
            --tag-shell: #a5d6ff;
            --tag-query: #d2a8ff;
        }

        [data-theme="github-light"] {
            /* GitHub Light */
            --bg: #ffffff;
            --fg: #24292f;
            --surface: #f6f8fa;
            --accent: #0969da;
            --muted: #57606a;
            --tag-prog: #0550ae;
            --tag-markup: #116329;
            --tag-config: #9a6700;
            --tag-data: #bc4c00;
            --tag-shell: #0550ae;
            --tag-query: #8250df;
        }

        [data-theme="one-dark"] {
            /* One Dark Pro */
            --bg: #282c34;
            --fg: #abb2bf;
            --surface: #21252b;
            --accent: #61afef;
            --muted: #5c6370;
            --tag-prog: #61afef;
            --tag-markup: #98c379;
            --tag-config: #e5c07b;
            --tag-data: #d19a66;
            --tag-shell: #56b6c2;
            --tag-query: #c678dd;
        }

        [data-theme="melange-dark"] {
            /* Melange Dark */
            --bg: #292522;
            --fg: #ece1d7;
            --surface: #34302c;
            --accent: #78997a;
            --muted: #867462;
            --tag-prog: #7d9bba;
            --tag-markup: #78997a;
            --tag-config: #c1a78e;
            --tag-data: #bd8183;
            --tag-shell: #7d9bba;
            --tag-query: #b380b0;
        }

        [data-theme="melange-light"] {
            /* Melange Light */
            --bg: #f1f1f1;
            --fg: #54433a;
            --surface: #e9e1db;
            --accent: #6f894e;
            --muted: #a38d78;
            --tag-prog: #4c7399;
            --tag-markup: #6f894e;
            --tag-config: #c29830;
            --tag-data: #bc5c00;
            --tag-shell: #4c7399;
            --tag-query: #945eb8;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--fg);
            margin: 0;
            padding: 2rem;
            min-height: 100vh;
            transition: background 0.2s, color 0.2s;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: var(--accent);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .arborium-icon {
            font-size: 1.2em;
        }

        .subtitle {
            color: var(--muted);
            margin-bottom: 2rem;
        }

        .controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            align-items: flex-start;
        }

        select, button {
            background: var(--surface);
            color: var(--fg);
            border: 1px solid var(--muted);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: border-color 0.2s, background 0.2s;
        }

        select:hover, button:hover {
            border-color: var(--accent);
        }

        /* Language picker styles */
        .lang-picker {
            position: relative;
            width: 400px;
        }

        .lang-picker-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
            background: var(--surface);
            color: var(--fg);
            border: 1px solid var(--muted);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .lang-picker-label:hover {
            border-color: var(--accent);
        }

        .lang-picker-label .lang-name {
            flex: 1;
        }

        .lang-picker-label .lang-id {
            color: var(--muted);
            font-size: 0.8rem;
            font-family: monospace;
        }

        .lang-picker-input {
            display: none;
            width: 100%;
            background: var(--surface);
            color: var(--fg);
            border: 1px solid var(--accent);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .lang-picker.searching .lang-picker-label {
            display: none;
        }

        .lang-picker.searching .lang-picker-input {
            display: block;
        }

        .lang-picker-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .lang-picker-input::placeholder {
            color: var(--muted);
        }

        .lang-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--surface);
            border: 1px solid var(--muted);
            border-top: none;
            border-radius: 0 0 4px 4px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 100;
        }

        .lang-dropdown.open {
            display: block;
        }

        .lang-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background 0.1s;
        }

        .lang-icon {
            width: 1.2em;
            height: 1.2em;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            flex-shrink: 0;
        }

        .lang-icon-placeholder {
            width: 1.2em;
            height: 1.2em;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            color: var(--muted);
            opacity: 0.5;
            flex-shrink: 0;
        }

        .lang-option:hover {
            background: rgba(137, 180, 250, 0.15);
        }

        .lang-option.highlighted {
            background: rgba(137, 180, 250, 0.15);
            outline: 2px solid var(--accent);
            outline-offset: -2px;
        }

        [data-theme="latte"] .lang-option:hover {
            background: rgba(30, 102, 245, 0.15);
        }

        [data-theme="latte"] .lang-option.highlighted {
            background: rgba(30, 102, 245, 0.15);
        }

        .lang-option.selected {
            background: rgba(137, 180, 250, 0.25);
        }

        [data-theme="latte"] .lang-option.selected {
            background: rgba(30, 102, 245, 0.25);
        }

        .lang-name {
            flex: 1;
        }

        .lang-id {
            color: var(--muted);
            font-size: 0.8rem;
            font-family: monospace;
        }

        .lang-aliases {
            color: var(--muted);
            font-size: 0.75rem;
            font-family: monospace;
            opacity: 0.7;
            margin-left: 0.5rem;
        }

        .tag {
            font-size: 0.65rem;
            padding: 0.15rem 0.4rem;
            border-radius: 3px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.03em;
        }

        .tag-code { background: var(--tag-prog); color: var(--bg); }
        .tag-markup { background: var(--tag-markup); color: var(--bg); }
        .tag-config { background: var(--tag-config); color: var(--bg); }
        .tag-data { background: var(--tag-data); color: var(--bg); }
        .tag-shell { background: var(--tag-shell); color: var(--bg); }
        .tag-query { background: var(--tag-query); color: var(--bg); }
        .tag-dark { background: #45475a; color: #cdd6f4; }
        .tag-light { background: #dce0e8; color: #4c4f69; }

        /* Theme picker styles - mirrors lang-picker */
        .theme-picker {
            position: relative;
            width: 240px;
        }

        .theme-picker-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
            background: var(--surface);
            color: var(--fg);
            border: 1px solid var(--muted);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .theme-picker-label:hover {
            border-color: var(--accent);
        }

        .theme-picker-label .theme-name {
            flex: 1;
        }

        .theme-picker-input {
            display: none;
            width: 100%;
            background: var(--surface);
            color: var(--fg);
            border: 1px solid var(--accent);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .theme-picker.searching .theme-picker-label {
            display: none;
        }

        .theme-picker.searching .theme-picker-input {
            display: block;
        }

        .theme-picker-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .theme-picker-input::placeholder {
            color: var(--muted);
        }

        .theme-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--surface);
            border: 1px solid var(--muted);
            border-top: none;
            border-radius: 0 0 4px 4px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 100;
        }

        .theme-dropdown.open {
            display: block;
        }

        .theme-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background 0.1s;
        }

        .theme-option:hover {
            background: rgba(137, 180, 250, 0.15);
        }

        .theme-option.highlighted {
            background: rgba(137, 180, 250, 0.15);
            outline: 2px solid var(--accent);
            outline-offset: -2px;
        }

        [data-theme="latte"] .theme-option:hover,
        [data-theme="github-light"] .theme-option:hover,
        [data-theme="melange-light"] .theme-option:hover {
            background: rgba(30, 102, 245, 0.15);
        }

        [data-theme="latte"] .theme-option.highlighted,
        [data-theme="github-light"] .theme-option.highlighted,
        [data-theme="melange-light"] .theme-option.highlighted {
            background: rgba(30, 102, 245, 0.15);
        }

        .theme-option.selected {
            background: rgba(137, 180, 250, 0.25);
        }

        [data-theme="latte"] .theme-option.selected,
        [data-theme="github-light"] .theme-option.selected,
        [data-theme="melange-light"] .theme-option.selected {
            background: rgba(30, 102, 245, 0.25);
        }

        .theme-name-text {
            flex: 1;
        }

        .theme-dropdown-empty {
            padding: 1rem;
            color: var(--muted);
            text-align: center;
            font-style: italic;
        }

        .lang-dropdown-empty {
            padding: 1rem;
            color: var(--muted);
            text-align: center;
            font-style: italic;
        }

        /* Mode toggle (dark/light) */
        .mode-toggle {
            display: flex;
            background: var(--surface);
            border: 1px solid var(--muted);
            border-radius: 4px;
            overflow: hidden;
        }

        .mode-btn {
            background: transparent;
            border: none;
            padding: 0.5rem 0.75rem;
            color: var(--muted);
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mode-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .mode-btn.active {
            background: var(--accent);
            color: var(--bg);
        }

        .mode-btn iconify-icon {
            font-size: 1.2em;
        }

        .editor-container {
            position: relative;
        }

        .editor-wrapper {
            position: relative;
            min-height: 400px;
        }

        .panel {
            background: var(--surface);
            border-radius: 8px;
            overflow: hidden;
            transition: background 0.2s;
        }

        .panel-header {
            background: rgba(0,0,0,0.2);
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        textarea {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            color: transparent;
            caret-color: var(--fg);
            border: none;
            padding: 1rem;
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: none;
            z-index: 2;
        }

        textarea:focus {
            outline: none;
        }

        textarea::selection {
            background: rgba(137, 180, 250, 0.3);
        }

        [data-theme="latte"] textarea::selection {
            background: rgba(30, 102, 245, 0.3);
        }

        .output {
            position: relative;
            padding: 1rem;
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
            min-height: 400px;
            overflow: auto;
            pointer-events: none;
            z-index: 1;
        }

        /* Syntax highlighting using custom web elements - Catppuccin Mocha (dark themes) */
        a-at { color: #f9e2af; }  /* attribute - yellow */
        a-co { color: #fab387; }  /* constant - peach */
        a-fb { color: #89dceb; }  /* function.builtin - sky */
        a-f { color: #89b4fa; }   /* function - blue */
        a-k { color: #cba6f7; }   /* keyword - mauve */
        a-o { color: #94e2d5; }   /* operator - teal */
        a-pr { color: #89b4fa; }  /* property - blue */
        a-p { color: #9399b2; }   /* punctuation - overlay2 */
        a-pb { color: #9399b2; }  /* punctuation.bracket */
        a-pd { color: #9399b2; }  /* punctuation.delimiter */
        a-s { color: #a6e3a1; }   /* string - green */
        a-ss { color: #f38ba8; }  /* string.special - red */
        a-tg { color: #89b4fa; }  /* tag - blue */
        a-t { color: #f9e2af; }   /* type - yellow */
        a-tb { color: #f9e2af; }  /* type.builtin */
        a-v { color: #cdd6f4; }   /* variable - text */
        a-vb { color: #f38ba8; }  /* variable.builtin - red */
        a-vp { color: #fab387; }  /* variable.parameter - peach */
        a-c { color: #6c7086; }   /* comment - overlay0 */
        a-m { color: #94e2d5; }   /* macro - teal */
        a-l { color: #f5c2e7; }   /* label - pink */
        a-da { color: #a6e3a1; }  /* diff.addition - green */
        a-dd { color: #f38ba8; }  /* diff.deletion - red */
        a-n { color: #fab387; }   /* number - peach */
        a-tl { color: #cdd6f4; }  /* text.literal */
        a-te { font-style: italic; } /* text.emphasis */
        a-ts { font-weight: bold; }  /* text.strong */
        a-tu { color: #89b4fa; text-decoration: underline; } /* text.uri */
        a-tr { color: #89dceb; }  /* text.reference */
        a-se { color: #fab387; }  /* string.escape */
        a-tt { color: #cba6f7; font-weight: bold; } /* text.title */
        a-ps { color: #f5c2e7; }  /* punctuation.special */
        a-tx { text-decoration: line-through; } /* text.strikethrough */
        a-sp { color: #cdd6f4; }  /* spell */

        /* Light theme overrides (Catppuccin Latte) */
        [data-theme="latte"] a-at { color: #df8e1d; }
        [data-theme="latte"] a-co { color: #fe640b; }
        [data-theme="latte"] a-fb { color: #04a5e5; }
        [data-theme="latte"] a-f { color: #1e66f5; }
        [data-theme="latte"] a-k { color: #8839ef; }
        [data-theme="latte"] a-o { color: #179299; }
        [data-theme="latte"] a-pr { color: #1e66f5; }
        [data-theme="latte"] a-p { color: #7c7f93; }
        [data-theme="latte"] a-pb { color: #7c7f93; }
        [data-theme="latte"] a-pd { color: #7c7f93; }
        [data-theme="latte"] a-s { color: #40a02b; }
        [data-theme="latte"] a-ss { color: #d20f39; }
        [data-theme="latte"] a-tg { color: #1e66f5; }
        [data-theme="latte"] a-t { color: #df8e1d; }
        [data-theme="latte"] a-tb { color: #df8e1d; }
        [data-theme="latte"] a-v { color: #4c4f69; }
        [data-theme="latte"] a-vb { color: #d20f39; }
        [data-theme="latte"] a-vp { color: #fe640b; }
        [data-theme="latte"] a-c { color: #9ca0b0; }
        [data-theme="latte"] a-m { color: #179299; }
        [data-theme="latte"] a-l { color: #ea76cb; }
        [data-theme="latte"] a-da { color: #40a02b; }
        [data-theme="latte"] a-dd { color: #d20f39; }
        [data-theme="latte"] a-n { color: #fe640b; }
        [data-theme="latte"] a-tl { color: #4c4f69; }
        [data-theme="latte"] a-tu { color: #1e66f5; }
        [data-theme="latte"] a-tr { color: #04a5e5; }
        [data-theme="latte"] a-se { color: #fe640b; }
        [data-theme="latte"] a-tt { color: #8839ef; }
        [data-theme="latte"] a-ps { color: #ea76cb; }
        [data-theme="latte"] a-sp { color: #4c4f69; }

        /* Tokyo Night */
        [data-theme="tokyo-night"] a-at { color: #e0af68; }
        [data-theme="tokyo-night"] a-co { color: #ff9e64; }
        [data-theme="tokyo-night"] a-fb { color: #7dcfff; }
        [data-theme="tokyo-night"] a-f { color: #7aa2f7; }
        [data-theme="tokyo-night"] a-k { color: #bb9af7; }
        [data-theme="tokyo-night"] a-o { color: #89ddff; }
        [data-theme="tokyo-night"] a-pr { color: #7aa2f7; }
        [data-theme="tokyo-night"] a-p { color: #a9b1d6; }
        [data-theme="tokyo-night"] a-pb { color: #a9b1d6; }
        [data-theme="tokyo-night"] a-pd { color: #a9b1d6; }
        [data-theme="tokyo-night"] a-s { color: #9ece6a; }
        [data-theme="tokyo-night"] a-ss { color: #f7768e; }
        [data-theme="tokyo-night"] a-tg { color: #f7768e; }
        [data-theme="tokyo-night"] a-t { color: #2ac3de; }
        [data-theme="tokyo-night"] a-tb { color: #2ac3de; }
        [data-theme="tokyo-night"] a-v { color: #c0caf5; }
        [data-theme="tokyo-night"] a-vb { color: #f7768e; }
        [data-theme="tokyo-night"] a-vp { color: #e0af68; }
        [data-theme="tokyo-night"] a-c { color: #565f89; }
        [data-theme="tokyo-night"] a-m { color: #7dcfff; }
        [data-theme="tokyo-night"] a-l { color: #ff9e64; }
        [data-theme="tokyo-night"] a-da { color: #9ece6a; }
        [data-theme="tokyo-night"] a-dd { color: #f7768e; }
        [data-theme="tokyo-night"] a-n { color: #ff9e64; }
        [data-theme="tokyo-night"] a-tl { color: #a9b1d6; }
        [data-theme="tokyo-night"] a-tu { color: #7aa2f7; }
        [data-theme="tokyo-night"] a-tr { color: #7dcfff; }
        [data-theme="tokyo-night"] a-se { color: #89ddff; }
        [data-theme="tokyo-night"] a-tt { color: #bb9af7; }
        [data-theme="tokyo-night"] a-ps { color: #89ddff; }
        [data-theme="tokyo-night"] a-sp { color: #a9b1d6; }

        /* Dracula */
        [data-theme="dracula"] a-at { color: #50fa7b; }
        [data-theme="dracula"] a-co { color: #bd93f9; }
        [data-theme="dracula"] a-fb { color: #8be9fd; }
        [data-theme="dracula"] a-f { color: #50fa7b; }
        [data-theme="dracula"] a-k { color: #ff79c6; }
        [data-theme="dracula"] a-o { color: #ff79c6; }
        [data-theme="dracula"] a-pr { color: #8be9fd; }
        [data-theme="dracula"] a-p { color: #f8f8f2; }
        [data-theme="dracula"] a-pb { color: #f8f8f2; }
        [data-theme="dracula"] a-pd { color: #f8f8f2; }
        [data-theme="dracula"] a-s { color: #f1fa8c; }
        [data-theme="dracula"] a-ss { color: #ff5555; }
        [data-theme="dracula"] a-tg { color: #ff79c6; }
        [data-theme="dracula"] a-t { color: #8be9fd; }
        [data-theme="dracula"] a-tb { color: #8be9fd; }
        [data-theme="dracula"] a-v { color: #f8f8f2; }
        [data-theme="dracula"] a-vb { color: #bd93f9; }
        [data-theme="dracula"] a-vp { color: #ffb86c; }
        [data-theme="dracula"] a-c { color: #6272a4; }
        [data-theme="dracula"] a-m { color: #50fa7b; }
        [data-theme="dracula"] a-l { color: #8be9fd; }
        [data-theme="dracula"] a-da { color: #50fa7b; }
        [data-theme="dracula"] a-dd { color: #ff5555; }
        [data-theme="dracula"] a-n { color: #bd93f9; }
        [data-theme="dracula"] a-tl { color: #f8f8f2; }
        [data-theme="dracula"] a-tu { color: #8be9fd; }
        [data-theme="dracula"] a-tr { color: #8be9fd; }
        [data-theme="dracula"] a-se { color: #ff79c6; }
        [data-theme="dracula"] a-tt { color: #bd93f9; }
        [data-theme="dracula"] a-ps { color: #ff79c6; }
        [data-theme="dracula"] a-sp { color: #f8f8f2; }

        /* Monokai Pro */
        [data-theme="monokai"] a-at { color: #a9dc76; }
        [data-theme="monokai"] a-co { color: #ab9df2; }
        [data-theme="monokai"] a-fb { color: #78dce8; }
        [data-theme="monokai"] a-f { color: #a9dc76; }
        [data-theme="monokai"] a-k { color: #ff6188; }
        [data-theme="monokai"] a-o { color: #ff6188; }
        [data-theme="monokai"] a-pr { color: #78dce8; }
        [data-theme="monokai"] a-p { color: #fcfcfa; }
        [data-theme="monokai"] a-pb { color: #fcfcfa; }
        [data-theme="monokai"] a-pd { color: #fcfcfa; }
        [data-theme="monokai"] a-s { color: #ffd866; }
        [data-theme="monokai"] a-ss { color: #ff6188; }
        [data-theme="monokai"] a-tg { color: #ff6188; }
        [data-theme="monokai"] a-t { color: #78dce8; }
        [data-theme="monokai"] a-tb { color: #78dce8; }
        [data-theme="monokai"] a-v { color: #fcfcfa; }
        [data-theme="monokai"] a-vb { color: #ab9df2; }
        [data-theme="monokai"] a-vp { color: #fc9867; }
        [data-theme="monokai"] a-c { color: #727072; }
        [data-theme="monokai"] a-m { color: #78dce8; }
        [data-theme="monokai"] a-l { color: #fc9867; }
        [data-theme="monokai"] a-da { color: #a9dc76; }
        [data-theme="monokai"] a-dd { color: #ff6188; }
        [data-theme="monokai"] a-n { color: #ab9df2; }
        [data-theme="monokai"] a-tl { color: #fcfcfa; }
        [data-theme="monokai"] a-tu { color: #78dce8; }
        [data-theme="monokai"] a-tr { color: #78dce8; }
        [data-theme="monokai"] a-se { color: #ff6188; }
        [data-theme="monokai"] a-tt { color: #ffd866; }
        [data-theme="monokai"] a-ps { color: #ff6188; }
        [data-theme="monokai"] a-sp { color: #fcfcfa; }

        /* GitHub Dark */
        [data-theme="github-dark"] a-at { color: #79c0ff; }
        [data-theme="github-dark"] a-co { color: #79c0ff; }
        [data-theme="github-dark"] a-fb { color: #d2a8ff; }
        [data-theme="github-dark"] a-f { color: #d2a8ff; }
        [data-theme="github-dark"] a-k { color: #ff7b72; }
        [data-theme="github-dark"] a-o { color: #ff7b72; }
        [data-theme="github-dark"] a-pr { color: #79c0ff; }
        [data-theme="github-dark"] a-p { color: #c9d1d9; }
        [data-theme="github-dark"] a-pb { color: #c9d1d9; }
        [data-theme="github-dark"] a-pd { color: #c9d1d9; }
        [data-theme="github-dark"] a-s { color: #a5d6ff; }
        [data-theme="github-dark"] a-ss { color: #ff7b72; }
        [data-theme="github-dark"] a-tg { color: #7ee787; }
        [data-theme="github-dark"] a-t { color: #ffa657; }
        [data-theme="github-dark"] a-tb { color: #ffa657; }
        [data-theme="github-dark"] a-v { color: #c9d1d9; }
        [data-theme="github-dark"] a-vb { color: #ffa657; }
        [data-theme="github-dark"] a-vp { color: #ffa657; }
        [data-theme="github-dark"] a-c { color: #8b949e; }
        [data-theme="github-dark"] a-m { color: #79c0ff; }
        [data-theme="github-dark"] a-l { color: #d2a8ff; }
        [data-theme="github-dark"] a-da { color: #7ee787; }
        [data-theme="github-dark"] a-dd { color: #ff7b72; }
        [data-theme="github-dark"] a-n { color: #79c0ff; }
        [data-theme="github-dark"] a-tl { color: #c9d1d9; }
        [data-theme="github-dark"] a-tu { color: #58a6ff; }
        [data-theme="github-dark"] a-tr { color: #d2a8ff; }
        [data-theme="github-dark"] a-se { color: #79c0ff; }
        [data-theme="github-dark"] a-tt { color: #d2a8ff; }
        [data-theme="github-dark"] a-ps { color: #79c0ff; }
        [data-theme="github-dark"] a-sp { color: #c9d1d9; }

        /* GitHub Light */
        [data-theme="github-light"] a-at { color: #0550ae; }
        [data-theme="github-light"] a-co { color: #0550ae; }
        [data-theme="github-light"] a-fb { color: #8250df; }
        [data-theme="github-light"] a-f { color: #8250df; }
        [data-theme="github-light"] a-k { color: #cf222e; }
        [data-theme="github-light"] a-o { color: #cf222e; }
        [data-theme="github-light"] a-pr { color: #0550ae; }
        [data-theme="github-light"] a-p { color: #24292f; }
        [data-theme="github-light"] a-pb { color: #24292f; }
        [data-theme="github-light"] a-pd { color: #24292f; }
        [data-theme="github-light"] a-s { color: #0a3069; }
        [data-theme="github-light"] a-ss { color: #cf222e; }
        [data-theme="github-light"] a-tg { color: #116329; }
        [data-theme="github-light"] a-t { color: #953800; }
        [data-theme="github-light"] a-tb { color: #953800; }
        [data-theme="github-light"] a-v { color: #24292f; }
        [data-theme="github-light"] a-vb { color: #953800; }
        [data-theme="github-light"] a-vp { color: #953800; }
        [data-theme="github-light"] a-c { color: #6e7781; }
        [data-theme="github-light"] a-m { color: #0550ae; }
        [data-theme="github-light"] a-l { color: #8250df; }
        [data-theme="github-light"] a-da { color: #116329; }
        [data-theme="github-light"] a-dd { color: #cf222e; }
        [data-theme="github-light"] a-n { color: #0550ae; }
        [data-theme="github-light"] a-tl { color: #24292f; }
        [data-theme="github-light"] a-tu { color: #0969da; }
        [data-theme="github-light"] a-tr { color: #8250df; }
        [data-theme="github-light"] a-se { color: #0550ae; }
        [data-theme="github-light"] a-tt { color: #0550ae; }
        [data-theme="github-light"] a-ps { color: #0550ae; }
        [data-theme="github-light"] a-sp { color: #24292f; }

        /* One Dark Pro */
        [data-theme="one-dark"] a-at { color: #d19a66; }
        [data-theme="one-dark"] a-co { color: #d19a66; }
        [data-theme="one-dark"] a-fb { color: #56b6c2; }
        [data-theme="one-dark"] a-f { color: #61afef; }
        [data-theme="one-dark"] a-k { color: #c678dd; }
        [data-theme="one-dark"] a-o { color: #56b6c2; }
        [data-theme="one-dark"] a-pr { color: #e06c75; }
        [data-theme="one-dark"] a-p { color: #abb2bf; }
        [data-theme="one-dark"] a-pb { color: #abb2bf; }
        [data-theme="one-dark"] a-pd { color: #abb2bf; }
        [data-theme="one-dark"] a-s { color: #98c379; }
        [data-theme="one-dark"] a-ss { color: #e06c75; }
        [data-theme="one-dark"] a-tg { color: #e06c75; }
        [data-theme="one-dark"] a-t { color: #e5c07b; }
        [data-theme="one-dark"] a-tb { color: #e5c07b; }
        [data-theme="one-dark"] a-v { color: #abb2bf; }
        [data-theme="one-dark"] a-vb { color: #e06c75; }
        [data-theme="one-dark"] a-vp { color: #d19a66; }
        [data-theme="one-dark"] a-c { color: #5c6370; }
        [data-theme="one-dark"] a-m { color: #56b6c2; }
        [data-theme="one-dark"] a-l { color: #e06c75; }
        [data-theme="one-dark"] a-da { color: #98c379; }
        [data-theme="one-dark"] a-dd { color: #e06c75; }
        [data-theme="one-dark"] a-n { color: #d19a66; }
        [data-theme="one-dark"] a-tl { color: #abb2bf; }
        [data-theme="one-dark"] a-tu { color: #61afef; }
        [data-theme="one-dark"] a-tr { color: #56b6c2; }
        [data-theme="one-dark"] a-se { color: #56b6c2; }
        [data-theme="one-dark"] a-tt { color: #e06c75; }
        [data-theme="one-dark"] a-ps { color: #c678dd; }
        [data-theme="one-dark"] a-sp { color: #abb2bf; }

        /* Melange Dark */
        [data-theme="melange-dark"] a-at { color: #c1a78e; }
        [data-theme="melange-dark"] a-co { color: #cf9bc2; }
        [data-theme="melange-dark"] a-fb { color: #7d9bba; }
        [data-theme="melange-dark"] a-f { color: #7d9bba; }
        [data-theme="melange-dark"] a-k { color: #bd8183; }
        [data-theme="melange-dark"] a-o { color: #bd8183; }
        [data-theme="melange-dark"] a-pr { color: #c1a78e; }
        [data-theme="melange-dark"] a-p { color: #ece1d7; }
        [data-theme="melange-dark"] a-pb { color: #ece1d7; }
        [data-theme="melange-dark"] a-pd { color: #ece1d7; }
        [data-theme="melange-dark"] a-s { color: #78997a; }
        [data-theme="melange-dark"] a-ss { color: #d47766; }
        [data-theme="melange-dark"] a-tg { color: #bd8183; }
        [data-theme="melange-dark"] a-t { color: #c1a78e; }
        [data-theme="melange-dark"] a-tb { color: #c1a78e; }
        [data-theme="melange-dark"] a-v { color: #ece1d7; }
        [data-theme="melange-dark"] a-vb { color: #d47766; }
        [data-theme="melange-dark"] a-vp { color: #c1a78e; }
        [data-theme="melange-dark"] a-c { color: #867462; }
        [data-theme="melange-dark"] a-m { color: #7d9bba; }
        [data-theme="melange-dark"] a-l { color: #cf9bc2; }
        [data-theme="melange-dark"] a-da { color: #78997a; }
        [data-theme="melange-dark"] a-dd { color: #d47766; }
        [data-theme="melange-dark"] a-n { color: #cf9bc2; }
        [data-theme="melange-dark"] a-tl { color: #ece1d7; }
        [data-theme="melange-dark"] a-tu { color: #7d9bba; }
        [data-theme="melange-dark"] a-tr { color: #7d9bba; }
        [data-theme="melange-dark"] a-se { color: #ebc06d; }
        [data-theme="melange-dark"] a-tt { color: #c1a78e; }
        [data-theme="melange-dark"] a-ps { color: #cf9bc2; }
        [data-theme="melange-dark"] a-sp { color: #ece1d7; }

        /* Melange Light */
        [data-theme="melange-light"] a-at { color: #c29830; }
        [data-theme="melange-light"] a-co { color: #945eb8; }
        [data-theme="melange-light"] a-fb { color: #4c7399; }
        [data-theme="melange-light"] a-f { color: #4c7399; }
        [data-theme="melange-light"] a-k { color: #bc5c00; }
        [data-theme="melange-light"] a-o { color: #bc5c00; }
        [data-theme="melange-light"] a-pr { color: #c29830; }
        [data-theme="melange-light"] a-p { color: #54433a; }
        [data-theme="melange-light"] a-pb { color: #54433a; }
        [data-theme="melange-light"] a-pd { color: #54433a; }
        [data-theme="melange-light"] a-s { color: #6f894e; }
        [data-theme="melange-light"] a-ss { color: #d73737; }
        [data-theme="melange-light"] a-tg { color: #bc5c00; }
        [data-theme="melange-light"] a-t { color: #c29830; }
        [data-theme="melange-light"] a-tb { color: #c29830; }
        [data-theme="melange-light"] a-v { color: #54433a; }
        [data-theme="melange-light"] a-vb { color: #d73737; }
        [data-theme="melange-light"] a-vp { color: #c29830; }
        [data-theme="melange-light"] a-c { color: #a38d78; }
        [data-theme="melange-light"] a-m { color: #4c7399; }
        [data-theme="melange-light"] a-l { color: #945eb8; }
        [data-theme="melange-light"] a-da { color: #6f894e; }
        [data-theme="melange-light"] a-dd { color: #d73737; }
        [data-theme="melange-light"] a-n { color: #945eb8; }
        [data-theme="melange-light"] a-tl { color: #54433a; }
        [data-theme="melange-light"] a-tu { color: #4c7399; }
        [data-theme="melange-light"] a-tr { color: #4c7399; }
        [data-theme="melange-light"] a-se { color: #a06d00; }
        [data-theme="melange-light"] a-tt { color: #c29830; }
        [data-theme="melange-light"] a-ps { color: #945eb8; }
        [data-theme="melange-light"] a-sp { color: #54433a; }

        .loading {
            color: var(--muted);
            font-style: italic;
        }

        .error {
            color: #f38ba8;
            padding: 1rem;
        }

        .status {
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            background: var(--surface);
            border-radius: 4px;
            font-size: 0.85rem;
            color: var(--muted);
        }

        .status.success {
            color: #a6e3a1;
        }

        [data-theme="latte"] .status.success {
            color: #40a02b;
        }

        a {
            color: var(--accent);
        }

        footer {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--surface);
            color: var(--muted);
            font-size: 0.9rem;
        }

        .lang-count {
            background: var(--accent);
            color: var(--bg);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        .match-highlight {
            color: var(--accent);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><iconify-icon icon="mdi:tree" class="arborium-icon"></iconify-icon> arborium <span class="lang-count" id="lang-count">0 languages</span> <span class="lang-count" id="bundle-size"></span></h1>
        <p class="subtitle">
            Batteries-included <a href="https://tree-sitter.github.io/tree-sitter/">tree-sitter</a>
            grammar collection running in your browser via WebAssembly.
        </p>

        <div class="controls">
            <div class="theme-picker" id="theme-picker">
                <div class="theme-picker-label" id="theme-label">
                    <span class="theme-name">Select a theme...</span>
                </div>
                <input type="text" class="theme-picker-input" id="theme-input" placeholder="Type to search..." autocomplete="off">
                <div class="theme-dropdown" id="theme-dropdown"></div>
            </div>
            <div class="mode-toggle" id="mode-toggle">
                <button class="mode-btn" data-mode="dark" id="mode-dark" title="Dark themes">
                    <iconify-icon icon="mdi:weather-night"></iconify-icon>
                </button>
                <button class="mode-btn" data-mode="light" id="mode-light" title="Light themes">
                    <iconify-icon icon="mdi:weather-sunny"></iconify-icon>
                </button>
            </div>
            <div class="lang-picker" id="lang-picker">
                <div class="lang-picker-label" id="lang-label">
                    <span class="lang-name">Select a language...</span>
                </div>
                <input type="text" class="lang-picker-input" id="lang-input" placeholder="Type to search..." autocomplete="off">
                <div class="lang-dropdown" id="lang-dropdown"></div>
            </div>
        </div>

        <div class="editor-container">
            <div class="panel">
                <div class="panel-header">Code Editor</div>
                <div class="editor-wrapper">
                    <div id="output" class="output">
                        <span class="loading">Loading WASM module...</span>
                    </div>
                    <textarea id="source" spellcheck="false"></textarea>
                </div>
            </div>
        </div>

        <div id="status" class="status"></div>

        <footer>
            <p>
                put together by <a href="https://fasterthanli.me/">fasterthanlime</a> |
                <a href="https://github.com/bearcove/arborium">GitHub</a> |
                <a href="https://crates.io/crates/arborium">crates.io</a> |
                <a href="https://docs.rs/arborium">Documentation</a>
            </p>
            <p>Licensed under MIT or Apache-2.0 (some grammars may have less permissive licenses, see feature flags)</p>
        </footer>
    </div>

    <script type="module">
        import init, { highlight, supported_languages, highlight_names } from './pkg/arborium_demo.js';

        // Language metadata: id -> { name, tag, icon, aliases }
        // icon is the Iconify icon name - using monochrome devicon-plain variants
        // aliases are alternative names used in markdown fenced code blocks
        const languageInfo = {
            // Programming languages
            ada: { name: 'Ada', tag: 'code', icon: 'mdi:alpha-a-box-outline' },
            agda: { name: 'Agda', tag: 'code' },
            asm: { name: 'Assembly', tag: 'code', icon: 'mdi:memory', aliases: ['assembly'] },
            awk: { name: 'AWK', tag: 'code', icon: 'mdi:text-box-outline' },
            bash: { name: 'Bash', tag: 'shell', icon: 'devicon-plain:bash', aliases: ['sh', 'shell'] },
            batch: { name: 'Batch', tag: 'shell', icon: 'mdi:console', aliases: ['bat', 'cmd'] },
            c: { name: 'C', tag: 'code', icon: 'devicon-plain:c', aliases: ['h'] },
            'c-sharp': { name: 'C#', tag: 'code', icon: 'devicon-plain:csharp', aliases: ['cs', 'csharp'] },
            clojure: { name: 'Clojure', tag: 'code', icon: 'simple-icons:clojure', aliases: ['clj'] },
            commonlisp: { name: 'Common Lisp', tag: 'code', icon: 'mdi:lambda', aliases: ['lisp', 'cl'] },
            cpp: { name: 'C++', tag: 'code', icon: 'devicon-plain:cplusplus', aliases: ['c++', 'cxx', 'hpp'] },
            css: { name: 'CSS', tag: 'markup', icon: 'devicon-plain:css3' },
            d: { name: 'D', tag: 'code', icon: 'mdi:alpha-d-box-outline', aliases: ['dlang'] },
            dart: { name: 'Dart', tag: 'code', icon: 'devicon-plain:dart' },
            diff: { name: 'Diff', tag: 'data', icon: 'mdi:file-compare', aliases: ['patch'] },
            dockerfile: { name: 'Dockerfile', tag: 'config', icon: 'devicon-plain:docker', aliases: ['docker'] },
            elisp: { name: 'Emacs Lisp', tag: 'code', icon: 'simple-icons:gnuemacs', aliases: ['emacs-lisp', 'el'] },
            elixir: { name: 'Elixir', tag: 'code', icon: 'devicon-plain:elixir', aliases: ['ex', 'exs'] },
            elm: { name: 'Elm', tag: 'code', icon: 'devicon-plain:elm' },
            erlang: { name: 'Erlang', tag: 'code', icon: 'devicon-plain:erlang', aliases: ['erl'] },
            fish: { name: 'Fish', tag: 'shell', icon: 'mdi:fish' },
            fsharp: { name: 'F#', tag: 'code', icon: 'devicon-plain:fsharp', aliases: ['fs', 'f#'] },
            gleam: { name: 'Gleam', tag: 'code', icon: 'devicon-plain:gleam' },
            glsl: { name: 'GLSL', tag: 'code', icon: 'devicon-plain:opengl', aliases: ['vert', 'frag'] },
            go: { name: 'Go', tag: 'code', icon: 'devicon-plain:go', aliases: ['golang'] },
            graphql: { name: 'GraphQL', tag: 'query', icon: 'devicon-plain:graphql', aliases: ['gql'] },
            haskell: { name: 'Haskell', tag: 'code', icon: 'devicon-plain:haskell', aliases: ['hs'] },
            hcl: { name: 'HCL', tag: 'config', icon: 'devicon-plain:terraform', aliases: ['terraform', 'tf'] },
            hlsl: { name: 'HLSL', tag: 'code', icon: 'mdi:cube-outline' },
            html: { name: 'HTML', tag: 'markup', icon: 'devicon-plain:html5', aliases: ['htm'] },
            idris: { name: 'Idris', tag: 'code', icon: 'mdi:alpha-i-box-outline', aliases: ['idr'] },
            ini: { name: 'INI', tag: 'config', icon: 'mdi:cog-outline', aliases: ['conf', 'cfg'] },
            java: { name: 'Java', tag: 'code', icon: 'devicon-plain:java' },
            javascript: { name: 'JavaScript', tag: 'code', icon: 'devicon-plain:javascript', aliases: ['js', 'jsx', 'mjs', 'cjs'] },
            jinja2: { name: 'Jinja2', tag: 'markup', icon: 'mdi:code-braces', aliases: ['jinja', 'j2'] },
            jq: { name: 'jq', tag: 'query', icon: 'mdi:code-json' },
            json: { name: 'JSON', tag: 'data', icon: 'mdi:code-json', aliases: ['jsonc'] },
            julia: { name: 'Julia', tag: 'code', icon: 'devicon-plain:julia', aliases: ['jl'] },
            kdl: { name: 'KDL', tag: 'config', icon: 'mdi:file-document-outline' },
            kotlin: { name: 'Kotlin', tag: 'code', icon: 'devicon-plain:kotlin', aliases: ['kt', 'kts'] },
            lean: { name: 'Lean', tag: 'code', icon: 'mdi:alpha-l-box-outline' },
            lua: { name: 'Lua', tag: 'code', icon: 'devicon-plain:lua' },
            markdown: { name: 'Markdown', tag: 'markup', icon: 'devicon-plain:markdown', aliases: ['md', 'mdx'] },
            matlab: { name: 'MATLAB', tag: 'code', icon: 'devicon-plain:matlab', aliases: ['m'] },
            meson: { name: 'Meson', tag: 'config', icon: 'mdi:hammer-wrench' },
            nginx: { name: 'nginx', tag: 'config', icon: 'simple-icons:nginx' },
            ninja: { name: 'Ninja', tag: 'config', icon: 'mdi:ninja' },
            nix: { name: 'Nix', tag: 'config', icon: 'devicon-plain:nixos' },
            objc: { name: 'Objective-C', tag: 'code', icon: 'devicon-plain:objectivec', aliases: ['objective-c', 'mm'] },
            ocaml: { name: 'OCaml', tag: 'code', icon: 'devicon-plain:ocaml', aliases: ['ml'] },
            perl: { name: 'Perl', tag: 'code', icon: 'devicon-plain:perl', aliases: ['pl', 'pm'] },
            php: { name: 'PHP', tag: 'code', icon: 'devicon-plain:php' },
            python: { name: 'Python', tag: 'code', icon: 'devicon-plain:python', aliases: ['py', 'py3', 'python3'] },
            query: { name: 'Tree-sitter Query', tag: 'query', icon: 'mdi:file-tree-outline', aliases: ['scm'] },
            r: { name: 'R', tag: 'code', icon: 'devicon-plain:r', aliases: ['rlang'] },
            ron: { name: 'RON', tag: 'data', icon: 'devicon-plain:rust' },
            ruby: { name: 'Ruby', tag: 'code', icon: 'devicon-plain:ruby', aliases: ['rb'] },
            rust: { name: 'Rust', tag: 'code', icon: 'devicon-plain:rust', aliases: ['rs'] },
            scala: { name: 'Scala', tag: 'code', icon: 'devicon-plain:scala' },
            scss: { name: 'SCSS', tag: 'markup', icon: 'simple-icons:sass', aliases: ['sass'] },
            sparql: { name: 'SPARQL', tag: 'query', icon: 'mdi:graph-outline', aliases: ['rq'] },
            sql: { name: 'SQL', tag: 'query', icon: 'mdi:database-outline', aliases: ['mysql', 'postgresql', 'postgres', 'sqlite'] },
            'ssh-config': { name: 'SSH Config', tag: 'config', icon: 'mdi:key-chain' },
            starlark: { name: 'Starlark', tag: 'code', icon: 'mdi:star-outline', aliases: ['bzl', 'bazel'] },
            svelte: { name: 'Svelte', tag: 'markup', icon: 'devicon-plain:svelte' },
            swift: { name: 'Swift', tag: 'code', icon: 'devicon-plain:swift' },
            textproto: { name: 'Text Proto', tag: 'data', icon: 'mdi:message-outline', aliases: ['pbtxt', 'textpb'] },
            thrift: { name: 'Thrift', tag: 'data', icon: 'mdi:swap-horizontal' },
            toml: { name: 'TOML', tag: 'config', icon: 'simple-icons:toml' },
            typescript: { name: 'TypeScript', tag: 'code', icon: 'devicon-plain:typescript', aliases: ['ts', 'tsx', 'mts', 'cts'] },
            typst: { name: 'Typst', tag: 'markup', icon: 'simple-icons:typst', aliases: ['typ'] },
            uiua: { name: 'Uiua', tag: 'code', icon: 'mdi:alpha-u-box-outline', aliases: ['ua'] },
            vb: { name: 'VB.NET', tag: 'code', icon: 'devicon-plain:visualbasic', aliases: ['vbnet', 'visualbasic'] },
            verilog: { name: 'Verilog', tag: 'code', icon: 'mdi:chip', aliases: ['v', 'sv', 'systemverilog'] },
            vim: { name: 'Vim Script', tag: 'code', icon: 'devicon-plain:vim', aliases: ['viml', 'vimscript'] },
            vue: { name: 'Vue', tag: 'markup', icon: 'devicon-plain:vuejs' },
            x86asm: { name: 'x86 Assembly', tag: 'code', icon: 'mdi:memory', aliases: ['nasm', 'x86'] },
            xml: { name: 'XML', tag: 'markup', icon: 'devicon-plain:xml', aliases: ['xsl', 'xslt', 'svg'] },
            yaml: { name: 'YAML', tag: 'config', icon: 'devicon-plain:yaml', aliases: ['yml'] },
            zig: { name: 'Zig', tag: 'code', icon: 'simple-icons:zig' },
            zsh: { name: 'Zsh', tag: 'shell', icon: 'mdi:console' },
            // Build systems
            caddy: { name: 'Caddyfile', tag: 'config', icon: 'simple-icons:caddy' },
            cmake: { name: 'CMake', tag: 'config', icon: 'devicon-plain:cmake' },
            capnp: { name: "Cap'n Proto", tag: 'data', icon: 'mdi:message-fast-outline' },
            devicetree: { name: 'Device Tree', tag: 'config', icon: 'mdi:file-tree' },
            dot: { name: 'DOT (Graphviz)', tag: 'data', icon: 'mdi:graph' },
        };

        // Get Iconify icon name for a language, returns null if no icon
        function getIcon(id) {
            const info = languageInfo[id];
            return info?.icon || null;
        }

        const examples = {
            "ada": "with Ada.Text_IO; use Ada.Text_IO;\n\nprocedure Hello is\n   type Day is (Mon, Tue, Wed, Thu, Fri, Sat, Sun);\n   Today : Day := Wed;\n   Count : Integer := 42;\nbegin\n   Put_Line(\"Hello from Ada!\");\n   if Today = Wed then\n      Put_Line(\"It's Wednesday\");\n   end if;\nend Hello;\n",
            "agda": "module Hello where\n\ndata Nat : Set where\n  zero : Nat\n  suc  : Nat ‚Üí Nat\n\n_+_ : Nat ‚Üí Nat ‚Üí Nat\nzero  + n = n\nsuc m + n = suc (m + n)\n\ndata List (A : Set) : Set where\n  []  : List A\n  _‚à∑_ : A ‚Üí List A ‚Üí List A\n",
            "asm": "section .data\n    msg db \"Hello, World!\", 0xa\n    len equ $ - msg\n\nsection .text\n    global _start\n\n_start:\n    mov eax, 4          ; sys_write\n    mov ebx, 1          ; stdout\n    mov ecx, msg\n    mov edx, len\n    int 0x80\n\n    mov eax, 1          ; sys_exit\n    xor ebx, ebx\n    int 0x80\n",
            "awk": "#!/usr/bin/awk -f\nBEGIN {\n    FS = \",\"\n    print \"Processing CSV data...\"\n}\n\n/^[^#]/ {\n    sum += $2\n    count++\n    names[NR] = $1\n}\n\nEND {\n    avg = count \x3e 0 ? sum / count : 0\n    printf \"Total: %d, Average: %.2f\\n\", sum, avg\n}\n",
            "bash": "#!/bin/bash\nset -euo pipefail\n\n# Deploy script\necho \"Starting deployment...\"\n\nfor service in api web worker; do\n    echo \"Deploying $service...\"\n    docker-compose up -d \"$service\"\ndone\n\necho \"Deployment complete!\"\n",
            "batch": "@echo off\nsetlocal enabledelayedexpansion\n\nset COUNT=0\nset NAME=World\n\necho Hello, %NAME%!\n\nfor %%f in (*.txt) do (\n    set /a COUNT+=1\n    echo Found: %%f\n)\n\nif %COUNT% gtr 0 (\n    echo Total files: %COUNT%\n) else (\n    echo No .txt files found\n)\n",
            "c": "#include \x3cstdio.h\x3e\n#include \x3cstdlib.h\x3e\n\ntypedef struct {\n    int x, y;\n} Point;\n\nint main(int argc, char *argv[]) {\n    Point p = {10, 20};\n    printf(\"Point: (%d, %d)\\n\", p.x, p.y);\n    return 0;\n}\n",
            "c-sharp": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nnamespace Example\n{\n    public record Person(string Name, int Age);\n\n    public class Program\n    {\n        public static async Task\x3cint\x3e Main(string[] args)\n        {\n            var people = new List\x3cPerson\x3e\n            {\n                new(\"Alice\", 30),\n                new(\"Bob\", 25),\n                new(\"Charlie\", 35)\n            };\n\n            var adults = people.Where(p =\x3e p.Age \x3e= 18)\n                               .OrderBy(p =\x3e p.Name);\n\n            foreach (var person in adults)\n            {\n                Console.WriteLine($\"{person.Name} is {person.Age}\");\n            }\n\n            return 0;\n        }\n    }\n}\n",
            "caddy": "# Caddyfile configuration\nexample.com {\n    root * /var/www/html\n    file_server\n\n    # Reverse proxy\n    reverse_proxy /api/* localhost:8080 {\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n    }\n\n    # TLS configuration\n    tls admin@example.com {\n        protocols tls1.2 tls1.3\n    }\n\n    # Logging\n    log {\n        output file /var/log/caddy/access.log\n        format json\n    }\n\n    # Headers\n    header {\n        X-Content-Type-Options nosniff\n        X-Frame-Options DENY\n        -Server\n    }\n\n    # Compression\n    encode gzip zstd\n}\n\n:8443 {\n    respond \"Hello from port 8443\"\n}\n",
            "capnp": "# Cap'n Proto schema\n@0xdbb9ad1f14bf0b36;\n\nstruct Person {\n  name @0 :Text;\n  age @1 :UInt32;\n  email @2 :Text;\n\n  phones @3 :List(PhoneNumber);\n\n  struct PhoneNumber {\n    number @0 :Text;\n    type @1 :Type;\n\n    enum Type {\n      mobile @0;\n      home @1;\n      work @2;\n    }\n  }\n}\n\nstruct AddressBook {\n  people @0 :List(Person);\n}\n\ninterface PersonService {\n  getPerson @0 (id :UInt64) -\x3e (person :Person);\n  addPerson @1 (person :Person) -\x3e (id :UInt64);\n  listPeople @2 () -\x3e (people :List(Person));\n}\n",
            "clojure": "(defn fibonacci [n]\n  \"Generate Fibonacci sequence\"\n  (loop [a 0 b 1 result []]\n    (if (\x3e= (count result) n)\n      result\n      (recur b (+ a b) (conj result a)))))\n\n(println (fibonacci 10))\n",
            "cmake": "# CMakeLists.txt example\ncmake_minimum_required(VERSION 3.20)\nproject(MyProject VERSION 1.0.0 LANGUAGES CXX)\n\nset(CMAKE_CXX_STANDARD 20)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\n\n# Find packages\nfind_package(Threads REQUIRED)\nfind_package(OpenSSL REQUIRED)\n\n# Add library\nadd_library(mylib STATIC\n    src/lib.cpp\n    src/utils.cpp\n)\n\ntarget_include_directories(mylib PUBLIC\n    $\x3cBUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include\x3e\n    $\x3cINSTALL_INTERFACE:include\x3e\n)\n\n# Add executable\nadd_executable(myapp src/main.cpp)\ntarget_link_libraries(myapp PRIVATE\n    mylib\n    Threads::Threads\n    OpenSSL::SSL\n)\n\n# Install rules\ninstall(TARGETS myapp mylib\n    RUNTIME DESTINATION bin\n    LIBRARY DESTINATION lib\n    ARCHIVE DESTINATION lib\n)\n",
            "commonlisp": "(defpackage :hello\n  (:use :cl))\n\n(defun factorial (n)\n  \"Calculate factorial recursively\"\n  (if (\x3c= n 1)\n      1\n      (* n (factorial (1- n)))))\n\n(defclass person ()\n  ((name :initarg :name :accessor person-name)\n   (age :initarg :age :accessor person-age)))\n\n(let ((result (factorial 5)))\n  (format t \"5! = ~a~%\" result))\n",
            "cpp": "#include \x3ciostream\x3e\n#include \x3cvector\x3e\n#include \x3calgorithm\x3e\n\ntemplate\x3ctypename T\x3e\nT sum(const std::vector\x3cT\x3e\x26 vec) {\n    return std::accumulate(vec.begin(), vec.end(), T{});\n}\n\nint main() {\n    std::vector\x3cint\x3e numbers = {1, 2, 3, 4, 5};\n    std::cout \x3c\x3c \"Sum: \" \x3c\x3c sum(numbers) \x3c\x3c std::endl;\n    return 0;\n}\n",
            "css": "/* Modern button styles */\n.button {\n    display: inline-flex;\n    align-items: center;\n    padding: 0.75rem 1.5rem;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-weight: 600;\n    transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.button:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n",
            "d": "import std.stdio;\nimport std.algorithm;\n\nstruct Point {\n    double x, y;\n\n    double magnitude() const {\n        return (x * x + y * y) ^^ 0.5;\n    }\n}\n\nvoid main() {\n    auto points = [Point(3, 4), Point(1, 1)];\n    auto mags = points.map!(p =\x3e p.magnitude);\n\n    foreach (m; mags) {\n        writefln(\"Magnitude: %.2f\", m);\n    }\n}\n",
            "dart": "class Person {\n  final String name;\n  final int age;\n\n  Person(this.name, this.age);\n\n  String greet() =\x3e 'Hello, my name is $name';\n}\n\nvoid main() {\n  final person = Person('Alice', 30);\n  print(person.greet());\n\n  final numbers = [1, 2, 3, 4, 5];\n  final doubled = numbers.map((n) =\x3e n * 2).toList();\n  print(doubled);\n}\n",
            "devicetree": "// Device Tree Source example\n/dts-v1/;\n\n/ {\n    model = \"Example Board\";\n    compatible = \"vendor,example-board\";\n    #address-cells = \x3c1\x3e;\n    #size-cells = \x3c1\x3e;\n\n    memory@80000000 {\n        device_type = \"memory\";\n        reg = \x3c0x80000000 0x40000000\x3e;\n    };\n\n    cpus {\n        #address-cells = \x3c1\x3e;\n        #size-cells = \x3c0\x3e;\n\n        cpu@0 {\n            device_type = \"cpu\";\n            compatible = \"arm,cortex-a53\";\n            reg = \x3c0\x3e;\n            clock-frequency = \x3c1200000000\x3e;\n        };\n    };\n\n    soc {\n        compatible = \"simple-bus\";\n        #address-cells = \x3c1\x3e;\n        #size-cells = \x3c1\x3e;\n        ranges;\n\n        uart0: serial@10000000 {\n            compatible = \"ns16550a\";\n            reg = \x3c0x10000000 0x100\x3e;\n            interrupts = \x3c1\x3e;\n            clock-frequency = \x3c24000000\x3e;\n            status = \"okay\";\n        };\n    };\n};\n",
            "diff": "diff --git a/src/main.rs b/src/main.rs\nindex 1234567..abcdefg 100644\n--- a/src/main.rs\n+++ b/src/main.rs\n@@ -1,5 +1,7 @@\n fn main() {\n-    println!(\"Hello\");\n+    let name = \"World\";\n+    println!(\"Hello, {}!\", name);\n }\n",
            "dockerfile": "FROM rust:1.75-alpine AS builder\nWORKDIR /app\n\nCOPY Cargo.toml Cargo.lock ./\nRUN mkdir src \x26\x26 echo \"fn main() {}\" \x3e src/main.rs\nRUN cargo build --release\n\nCOPY src ./src\nRUN cargo build --release\n\nFROM alpine:3.19\nCOPY --from=builder /app/target/release/myapp /usr/local/bin/\nENTRYPOINT [\"myapp\"]\n",
            "dot": "// Graphviz DOT example\ndigraph Architecture {\n    rankdir=TB;\n    node [shape=box, style=filled];\n\n    // Nodes with attributes\n    client [label=\"Web Client\", fillcolor=\"#a8d5ba\"];\n    api [label=\"API Gateway\", fillcolor=\"#ffd6a5\"];\n    auth [label=\"Auth Service\", fillcolor=\"#ffadad\"];\n    db [label=\"Database\", shape=cylinder, fillcolor=\"#bdb2ff\"];\n    cache [label=\"Redis Cache\", shape=diamond, fillcolor=\"#fdffb6\"];\n\n    // Edges with labels\n    client -\x3e api [label=\"HTTPS\"];\n    api -\x3e auth [label=\"JWT\"];\n    api -\x3e db [label=\"SQL\"];\n    api -\x3e cache [label=\"GET/SET\", style=dashed];\n    auth -\x3e db [label=\"verify\"];\n\n    // Subgraph\n    subgraph cluster_backend {\n        label=\"Backend Services\";\n        style=dotted;\n        api; auth;\n    }\n}\n",
            "elisp": ";;; hello.el --- Demo Emacs Lisp code -*- lexical-binding: t -*-\n\n(defvar my-greeting \"Hello\"\n  \"The default greeting.\")\n\n(defun greet (name)\n  \"Greet NAME with a message.\"\n  (interactive \"sName: \")\n  (message \"%s, %s!\" my-greeting name))\n\n(defmacro with-timer (\x26rest body)\n  \"Execute BODY and report time taken.\"\n  `(let ((start (current-time)))\n     ,@body\n     (message \"Took %.3fs\" (float-time (time-since start)))))\n",
            "elixir": "defmodule MyApp.User do\n  @moduledoc \"User module for handling user data\"\n\n  defstruct [:name, :email, :age]\n\n  def new(name, email, age) do\n    %__MODULE__{name: name, email: email, age: age}\n  end\n\n  def greet(%__MODULE__{name: name}) do\n    \"Hello, #{name}!\"\n  end\nend\n\nuser = MyApp.User.new(\"Alice\", \"alice@example.com\", 30)\nIO.puts(MyApp.User.greet(user))\n",
            "elm": "module Main exposing (main)\n\nimport Html exposing (Html, div, text, button)\nimport Html.Events exposing (onClick)\n\n\ntype alias Model =\n    { count : Int }\n\n\ntype Msg\n    = Increment\n    | Decrement\n\n\nupdate : Msg -\x3e Model -\x3e Model\nupdate msg model =\n    case msg of\n        Increment -\x3e\n            { model | count = model.count + 1 }\n\n        Decrement -\x3e\n            { model | count = model.count - 1 }\n",
            "erlang": "-module(hello).\n-export([start/0, factorial/1]).\n\n-record(person, {name, age}).\n\nstart() -\x3e\n    Person = #person{name = \"Alice\", age = 30},\n    io:format(\"Hello, ~s!~n\", [Person#person.name]),\n    Result = factorial(5),\n    io:format(\"5! = ~p~n\", [Result]).\n\nfactorial(0) -\x3e 1;\nfactorial(N) when N \x3e 0 -\x3e\n    N * factorial(N - 1).\n",
            "fish": "#!/usr/bin/env fish\n\nset -l greeting \"Hello\"\nset -gx PATH $HOME/bin $PATH\n\nfunction greet --argument name\n    echo \"$greeting, $name!\"\nend\n\nfor file in *.txt\n    if test -f $file\n        echo \"Found: $file\"\n    end\nend\n\ngreet \"World\"\n",
            "fsharp": "module App\n\ntype Person = { Name: string; Age: int }\n\nlet greet person =\n    sprintf \"Hello, %s!\" person.Name\n\nlet people = [\n    { Name = \"Alice\"; Age = 30 }\n    { Name = \"Bob\"; Age = 25 }\n]\n\npeople\n|\x3e List.map greet\n|\x3e List.iter (printfn \"%s\")\n",
            "gleam": "import gleam/io\nimport gleam/list\n\npub type Person {\n  Person(name: String, age: Int)\n}\n\npub fn greet(person: Person) -\x3e String {\n  \"Hello, \" \x3c\x3e person.name \x3c\x3e \"!\"\n}\n\npub fn main() {\n  let people = [\n    Person(\"Alice\", 30),\n    Person(\"Bob\", 25),\n  ]\n\n  list.each(people, fn(p) { io.println(greet(p)) })\n}\n",
            "glsl": "#version 330 core\n\nuniform mat4 modelViewProjection;\nuniform vec3 lightPosition;\nuniform sampler2D diffuseTexture;\n\nin vec3 vertexPosition;\nin vec3 vertexNormal;\nin vec2 texCoord;\n\nout vec4 fragColor;\n\nvoid main() {\n    vec3 normal = normalize(vertexNormal);\n    vec3 lightDir = normalize(lightPosition - vertexPosition);\n    float diff = max(dot(normal, lightDir), 0.0);\n    vec4 texColor = texture(diffuseTexture, texCoord);\n    fragColor = texColor * diff;\n}\n",
            "go": "package main\n\nimport \"fmt\"\n\nfunc main() {\n    ch := make(chan int, 10)\n\n    go func() {\n        for i := 0; i \x3c 10; i++ {\n            ch \x3c- i * i\n        }\n        close(ch)\n    }()\n\n    for num := range ch {\n        fmt.Println(num)\n    }\n}\n",
            "graphql": "type User {\n  id: ID!\n  name: String!\n  email: String\n  posts: [Post!]!\n}\n\ntype Post {\n  id: ID!\n  title: String!\n  content: String\n  author: User!\n}\n\ntype Query {\n  users: [User!]!\n  user(id: ID!): User\n  posts(limit: Int = 10): [Post!]!\n}\n\ntype Mutation {\n  createUser(name: String!, email: String): User!\n  createPost(title: String!, authorId: ID!): Post!\n}\n",
            "haskell": "module Main where\n\nimport Data.List (sort)\n\nquicksort :: Ord a =\x3e [a] -\x3e [a]\nquicksort [] = []\nquicksort (x:xs) =\n    quicksort smaller ++ [x] ++ quicksort larger\n  where\n    smaller = [a | a \x3c- xs, a \x3c= x]\n    larger  = [a | a \x3c- xs, a \x3e x]\n\nmain :: IO ()\nmain = print $ quicksort [3, 1, 4, 1, 5, 9, 2, 6]\n",
            "hcl": "terraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~\x3e 4.0\"\n    }\n  }\n}\n\nvariable \"instance_type\" {\n  type    = string\n  default = \"t3.micro\"\n}\n\nresource \"aws_instance\" \"web\" {\n  ami           = \"ami-12345678\"\n  instance_type = var.instance_type\n\n  tags = {\n    Name = \"WebServer\"\n  }\n}\n",
            "hlsl": "cbuffer PerFrame : register(b0) {\n    float4x4 viewProj;\n    float3 lightDir;\n    float time;\n};\n\nstruct VSInput {\n    float3 position : POSITION;\n    float3 normal : NORMAL;\n    float2 uv : TEXCOORD0;\n};\n\nstruct PSInput {\n    float4 position : SV_POSITION;\n    float3 normal : NORMAL;\n    float2 uv : TEXCOORD0;\n};\n\nPSInput VSMain(VSInput input) {\n    PSInput output;\n    output.position = mul(viewProj, float4(input.position, 1.0));\n    output.normal = input.normal;\n    output.uv = input.uv;\n    return output;\n}\n",
            "html": "\x3c!DOCTYPE html\x3e\n\x3chtml lang=\"en\"\x3e\n\x3chead\x3e\n    \x3cmeta charset=\"UTF-8\"\x3e\n    \x3ctitle\x3eHello World\x3c/title\x3e\n    \x3cstyle\x3e\n        .container {\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 2rem;\n        }\n        .btn { background: #3498db; color: white; }\n    \x3c/style\x3e\n\x3c/head\x3e\n\x3cbody\x3e\n    \x3cmain class=\"container\"\x3e\n        \x3ch1\x3eWelcome\x3c/h1\x3e\n        \x3cbutton class=\"btn\" id=\"greet\"\x3eClick me\x3c/button\x3e\n    \x3c/main\x3e\n    \x3cscript\x3e\n        document.getElementById('greet').addEventListener('click', () =\x3e {\n            const name = prompt('What is your name?');\n            alert(`Hello, ${name}!`);\n        });\n    \x3c/script\x3e\n\x3c/body\x3e\n\x3c/html\x3e\n",
            "idris": "module Main\n\ndata Vect : Nat -\x3e Type -\x3e Type where\n    Nil  : Vect Z a\n    (::) : a -\x3e Vect n a -\x3e Vect (S n) a\n\nappend : Vect n a -\x3e Vect m a -\x3e Vect (n + m) a\nappend Nil       ys = ys\nappend (x :: xs) ys = x :: append xs ys\n\ntotal\nhead : Vect (S n) a -\x3e a\nhead (x :: _) = x\n\nmain : IO ()\nmain = printLn (head [1, 2, 3])\n",
            "ini": "[database]\nhost = localhost\nport = 5432\nname = myapp\nuser = admin\n\n[cache]\nenabled = true\nttl = 3600\nbackend = redis\n\n[logging]\nlevel = info\nformat = json\n",
            "java": "import java.util.List;\nimport java.util.stream.Collectors;\n\npublic class Main {\n    public static void main(String[] args) {\n        List\x3cInteger\x3e numbers = List.of(1, 2, 3, 4, 5);\n\n        List\x3cInteger\x3e doubled = numbers.stream()\n            .map(n -\x3e n * 2)\n            .filter(n -\x3e n \x3e 4)\n            .collect(Collectors.toList());\n\n        System.out.println(doubled);\n    }\n}\n",
            "javascript": "class EventEmitter {\n    #listeners = new Map();\n\n    on(event, callback) {\n        if (!this.#listeners.has(event)) {\n            this.#listeners.set(event, []);\n        }\n        this.#listeners.get(event).push(callback);\n    }\n\n    emit(event, ...args) {\n        const callbacks = this.#listeners.get(event) ?? [];\n        callbacks.forEach(cb =\x3e cb(...args));\n    }\n}\n\nasync function fetchData(url) {\n    const response = await fetch(url);\n    const { items } = await response.json();\n    return items.map(item =\x3e item.name);\n}\n",
            "jinja2": "{% extends \"base.html\" %}\n\n{% block title %}{{ page_title | default(\"Home\") }}{% endblock %}\n\n{% block content %}\n\x3cul\x3e\n{% for user in users %}\n    \x3cli class=\"{{ loop.cycle('odd', 'even') }}\"\x3e\n        {{ user.name }} - {{ user.email }}\n        {% if user.admin %}(Admin){% endif %}\n    \x3c/li\x3e\n{% else %}\n    \x3cli\x3eNo users found\x3c/li\x3e\n{% endfor %}\n\x3c/ul\x3e\n{% endblock %}\n",
            "jq": "# Filter and transform JSON data\n.users\n| map(select(.active == true))\n| map({\n    name: .name,\n    email: .email,\n    role: (.role // \"user\")\n  })\n| sort_by(.name)\n| group_by(.role)\n| map({\n    role: .[0].role,\n    count: length,\n    members: [.[].name]\n  })\n",
            "json": "{\n  \"name\": \"arborium\",\n  \"version\": \"0.1.0\",\n  \"stats\": {\n    \"languages\": 72,\n    \"bundle_size\": 4.2e6,\n    \"parse_time_ms\": 0.005,\n    \"accuracy\": 0.9999\n  },\n  \"limits\": {\n    \"max_file_size\": 1048576,\n    \"timeout_ms\": 5000\n  },\n  \"features\": [\"highlighting\", \"folding\", null, true, false]\n}\n",
            "julia": "module Example\n\nstruct Point{T\x3c:Number}\n    x::T\n    y::T\nend\n\nfunction magnitude(p::Point)\n    sqrt(p.x^2 + p.y^2)\nend\n\n# Multiple dispatch\nBase.:+(a::Point, b::Point) = Point(a.x + b.x, a.y + b.y)\n\npoints = [Point(3.0, 4.0), Point(1.0, 1.0)]\nmags = [magnitude(p) for p in points]\nprintln(\"Magnitudes: $mags\")\n\nend\n",
            "kdl": "// KDL configuration example\npackage {\n    name \"my-app\"\n    version \"1.0.0\"\n    authors \"Alice\" \"Bob\"\n}\n\ndependencies {\n    serde version=\"1.0\" features=[\"derive\"]\n    tokio version=\"1.0\" {\n        features \"full\" \"rt-multi-thread\"\n    }\n}\n\nserver host=\"0.0.0.0\" port=8080 {\n    tls enabled=true {\n        cert \"/etc/ssl/cert.pem\"\n        key \"/etc/ssl/key.pem\"\n    }\n}\n",
            "lean": "-- Lean 4 example\ndef fibonacci : Nat ‚Üí Nat\n  | 0 =\x3e 0\n  | 1 =\x3e 1\n  | n + 2 =\x3e fibonacci n + fibonacci (n + 1)\n\ntheorem fib_pos : ‚àÄ n, fibonacci n ‚â• 0 := by\n  intro n\n  exact Nat.zero_le _\n\n#eval fibonacci 10\n\nstructure Point where\n  x : Float\n  y : Float\nderiving Repr\n\ndef Point.add (p q : Point) : Point :=\n  { x := p.x + q.x, y := p.y + q.y }\n",
            "lua": "-- Fibonacci generator\nlocal function fibonacci(n)\n    local a, b = 0, 1\n    local result = {}\n\n    for i = 1, n do\n        table.insert(result, a)\n        a, b = b, a + b\n    end\n\n    return result\nend\n\nlocal fib = fibonacci(10)\nfor i, v in ipairs(fib) do\n    print(string.format(\"fib[%d] = %d\", i, v))\nend\n",
            "markdown": "# Project Title\n\nA brief description of the project.\n\n## Features\n\n- **Fast**: Optimized for performance\n- **Flexible**: Works with any framework\n- *Reliable*: Battle-tested in production\n\n## Installation\n\n```bash\nnpm install my-package\n```\n\nSee [documentation](https://docs.example.com) for more info.\n",
            "matlab": "% MATLAB example - Matrix operations\nfunction result = matrix_demo()\n    % Create matrices\n    A = [1, 2, 3; 4, 5, 6; 7, 8, 9];\n    B = eye(3);\n\n    % Matrix multiplication\n    C = A * B;\n\n    % Element-wise operations\n    D = A .^ 2;\n\n    % Solve linear system Ax = b\n    b = [1; 2; 3];\n    x = A \\ b;\n\n    % Plot results\n    figure;\n    plot(1:10, sin(1:10), 'r-', 'LineWidth', 2);\n    title('Sine Wave');\n    xlabel('x');\n    ylabel('sin(x)');\n\n    result = sum(diag(C));\nend\n",
            "meson": "project('myapp', 'c',\n  version: '1.0.0',\n  default_options: ['warning_level=3'])\n\nsrc = files('src/main.c', 'src/utils.c')\n\nexecutable('myapp', src,\n  install: true,\n  dependencies: [\n    dependency('glib-2.0'),\n  ])\n",
            "nginx": "server {\n    listen 80;\n    server_name example.com;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n\n    location /static/ {\n        alias /var/www/static/;\n        expires 30d;\n        add_header Cache-Control \"public, immutable\";\n    }\n}\n",
            "ninja": "# Ninja build file\nninja_required_version = 1.5\n\n# Variables\nbuilddir = build\ncxx = clang++\ncflags = -Wall -O2\n\n# Rules\nrule cxx\n  command = $cxx $cflags -c $in -o $out\n  description = Compiling $in\n\nrule link\n  command = $cxx $in -o $out\n  description = Linking $out\n\nrule clean\n  command = rm -rf $builddir\n  description = Cleaning build directory\n\n# Build edges\nbuild $builddir/main.o: cxx src/main.cpp\nbuild $builddir/utils.o: cxx src/utils.cpp\n\nbuild $builddir/app: link $builddir/main.o $builddir/utils.o\n\n# Default target\ndefault $builddir/app\n\n# Phony targets\nbuild clean: clean\n",
            "nix": "{ pkgs ? import \x3cnixpkgs\x3e {} }:\n\npkgs.mkShell {\n  buildInputs = with pkgs; [\n    rustc\n    cargo\n    pkg-config\n    openssl\n  ];\n\n  shellHook = ''\n    echo \"Development environment ready!\"\n    export RUST_BACKTRACE=1\n  '';\n}\n",
            "objc": "// Objective-C example\n#import \x3cFoundation/Foundation.h\x3e\n\n@interface Person : NSObject\n\n@property (nonatomic, strong) NSString *name;\n@property (nonatomic, assign) NSInteger age;\n\n- (instancetype)initWithName:(NSString *)name age:(NSInteger)age;\n- (void)greet;\n\n@end\n\n@implementation Person\n\n- (instancetype)initWithName:(NSString *)name age:(NSInteger)age {\n    self = [super init];\n    if (self) {\n        _name = name;\n        _age = age;\n    }\n    return self;\n}\n\n- (void)greet {\n    NSLog(@\"Hello, I'm %@ and I'm %ld years old\", self.name, (long)self.age);\n}\n\n@end\n\nint main(int argc, const char *argv[]) {\n    @autoreleasepool {\n        Person *person = [[Person alloc] initWithName:@\"Alice\" age:30];\n        [person greet];\n    }\n    return 0;\n}\n",
            "perl": "#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature 'say';\n\n# Hash of arrays\nmy %data = (\n    fruits  =\x3e ['apple', 'banana', 'cherry'],\n    numbers =\x3e [1, 2, 3, 4, 5],\n);\n\n# Subroutine with regex\nsub process_text {\n    my ($text) = @_;\n    $text =~ s/\\bfoo\\b/bar/gi;\n    return $text;\n}\n\n# File handling\nopen(my $fh, '\x3c', 'input.txt') or die \"Cannot open: $!\";\nwhile (my $line = \x3c$fh\x3e) {\n    chomp $line;\n    say \"Line: $line\" if $line =~ /pattern/;\n}\nclose($fh);\n\n# Object-oriented style\npackage Counter;\nsub new { bless { count =\x3e 0 }, shift }\nsub increment { $_[0]-\x3e{count}++ }\n",
            "php": "\x3c?php\n\nclass User {\n    public function __construct(\n        private string $name,\n        private int $age\n    ) {}\n\n    public function greet(): string {\n        return \"Hello, {$this-\x3ename}!\";\n    }\n}\n\n$user = new User('Alice', 30);\necho $user-\x3egreet();\n",
            "python": "def fibonacci(n: int) -\x3e list[int]:\n    \"\"\"Generate Fibonacci sequence up to n terms.\"\"\"\n    if n \x3c= 0:\n        return []\n\n    sequence = [0, 1]\n    while len(sequence) \x3c n:\n        sequence.append(sequence[-1] + sequence[-2])\n\n    return sequence[:n]\n\n# Example usage\nprint(fibonacci(10))\n",
            "query": "; Tree-sitter query example\n; Highlight function definitions\n(function_definition\n  name: (identifier) @function)\n\n; Highlight method calls\n(call_expression\n  function: (attribute\n    attribute: (identifier) @method))\n\n; Capture string literals\n(string) @string\n\n; Match if statements\n(if_statement\n  condition: (_) @condition\n  consequence: (_) @consequence\n  alternative: (_)? @alternative)\n\n; Fold class definitions\n(class_definition) @fold\n\n; Locals for variable scoping\n(function_definition) @local.scope\n(parameter) @local.definition\n\n; Injections for embedded languages\n((string) @injection.content\n (#match? @injection.content \"^r\\\"\")\n (#set! injection.language \"regex\"))\n",
            "r": "# R Statistical Programming\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# Create a data frame\ndf \x3c- data.frame(\n  name = c(\"Alice\", \"Bob\", \"Charlie\"),\n  age = c(25, 30, 35),\n  score = c(85.5, 92.0, 78.5)\n)\n\n# Data manipulation with dplyr\nresult \x3c- df %\x3e%\n  filter(age \x3e 25) %\x3e%\n  mutate(grade = ifelse(score \x3e= 90, \"A\", \"B\")) %\x3e%\n  arrange(desc(score))\n\n# Define a function\ncalculate_mean \x3c- function(x, na.rm = TRUE) {\n  if (length(x) == 0) return(NA)\n  sum(x, na.rm = na.rm) / length(x)\n}\n\n# Plotting\nggplot(df, aes(x = name, y = score, fill = name)) +\n  geom_bar(stat = \"identity\") +\n  theme_minimal() +\n  labs(title = \"Scores by Person\")\n",
            "ron": "// RON (Rusty Object Notation) example\nGameConfig(\n    title: \"My Awesome Game\",\n    version: (1, 0, 0),\n    debug: false,\n\n    window: WindowConfig(\n        width: 1920,\n        height: 1080,\n        fullscreen: true,\n        vsync: true,\n    ),\n\n    player: PlayerConfig(\n        name: \"Hero\",\n        health: 100.0,\n        speed: 5.5,\n        inventory: [\n            Item(name: \"Sword\", damage: 25),\n            Item(name: \"Shield\", defense: 15),\n            Item(name: \"Potion\", healing: 50),\n        ],\n        position: (x: 0.0, y: 0.0, z: 0.0),\n    ),\n\n    keybindings: {\n        \"move_forward\": Key(W),\n        \"move_back\": Key(S),\n        \"jump\": Key(Space),\n        \"attack\": MouseButton(Left),\n    },\n)\n",
            "ruby": "class Person\n  attr_reader :name, :age\n\n  def initialize(name, age)\n    @name = name\n    @age = age\n  end\n\n  def greet\n    \"Hello, my name is #{name}!\"\n  end\nend\n\nperson = Person.new('Alice', 30)\nputs person.greet\n",
            "rust": "use std::fmt;\n\npub trait Greet {\n    fn greet(\x26self) -\x3e String;\n}\n\n#[derive(Debug, Clone)]\npub struct Person {\n    name: String,\n    role: Role,\n}\n\npub enum Role {\n    Admin,\n    User { permissions: Vec\x3cString\x3e },\n}\n\nimpl Greet for Person {\n    fn greet(\x26self) -\x3e String {\n        format!(\"Hello, I'm {}!\", self.name)\n    }\n}\n\nimpl fmt::Display for Person {\n    fn fmt(\x26self, f: \x26mut fmt::Formatter\x3c'_\x3e) -\x3e fmt::Result {\n        write!(f, \"{} ({:?})\", self.name, self.role)\n    }\n}\n\nfn main() {\n    let alice = Person {\n        name: \"Alice\".into(),\n        role: Role::Admin,\n    };\n    println!(\"{}\", alice.greet());\n}\n",
            "scala": "object Main extends App {\n  case class Person(name: String, age: Int)\n\n  val people = List(\n    Person(\"Alice\", 30),\n    Person(\"Bob\", 25)\n  )\n\n  people\n    .filter(_.age \x3e 20)\n    .map(p =\x3e s\"Hello, ${p.name}!\")\n    .foreach(println)\n}\n",
            "scss": "$primary: #3498db;\n$spacing: 1rem;\n\n@mixin button-style($color) {\n  background: $color;\n  padding: $spacing;\n  border-radius: 4px;\n\n  \x26:hover {\n    background: darken($color, 10%);\n  }\n}\n\n.button {\n  @include button-style($primary);\n\n  \x26--large {\n    padding: $spacing * 2;\n  }\n}\n",
            "sparql": "# SPARQL query example\nPREFIX rdf: \x3chttp://www.w3.org/1999/02/22-rdf-syntax-ns#\x3e\nPREFIX rdfs: \x3chttp://www.w3.org/2000/01/rdf-schema#\x3e\nPREFIX foaf: \x3chttp://xmlns.com/foaf/0.1/\x3e\nPREFIX dbo: \x3chttp://dbpedia.org/ontology/\x3e\n\nSELECT DISTINCT ?person ?name ?birthDate ?birthPlace\nWHERE {\n    ?person rdf:type dbo:Person ;\n            foaf:name ?name ;\n            dbo:birthDate ?birthDate .\n\n    OPTIONAL {\n        ?person dbo:birthPlace ?place .\n        ?place rdfs:label ?birthPlace .\n        FILTER (LANG(?birthPlace) = \"en\")\n    }\n\n    FILTER (?birthDate \x3e= \"1990-01-01\"^^xsd:date)\n    FILTER (REGEX(?name, \"^A\", \"i\"))\n}\nORDER BY DESC(?birthDate)\nLIMIT 100\nOFFSET 0\n",
            "sql": "SELECT\n    u.id,\n    u.name,\n    COUNT(o.id) AS order_count,\n    SUM(o.total) AS total_spent\nFROM users u\nLEFT JOIN orders o ON u.id = o.user_id\nWHERE u.created_at \x3e= '2024-01-01'\nGROUP BY u.id, u.name\nHAVING COUNT(o.id) \x3e 5\nORDER BY total_spent DESC\nLIMIT 10;\n",
            "ssh-config": "# SSH Client Configuration\nHost *\n    AddKeysToAgent yes\n    IdentitiesOnly yes\n    ServerAliveInterval 60\n    ServerAliveCountMax 3\n\nHost github.com\n    HostName github.com\n    User git\n    IdentityFile ~/.ssh/github_ed25519\n    PreferredAuthentications publickey\n\nHost dev-server\n    HostName 192.168.1.100\n    User developer\n    Port 2222\n    IdentityFile ~/.ssh/dev_rsa\n    ForwardAgent yes\n    LocalForward 8080 localhost:80\n\nHost production\n    HostName prod.example.com\n    User deploy\n    ProxyJump bastion\n    IdentityFile ~/.ssh/prod_key\n    StrictHostKeyChecking yes\n\nHost bastion\n    HostName bastion.example.com\n    User admin\n    IdentityFile ~/.ssh/bastion_key\n",
            "starlark": "# Buck2 build file example\nload(\"@prelude//rust:cargo_package.bzl\", \"cargo\")\nload(\"@prelude//rust:rust_binary.bzl\", \"rust_binary\")\nload(\"@prelude//rust:rust_library.bzl\", \"rust_library\")\n\nrust_library(\n    name = \"my_lib\",\n    srcs = glob([\"src/**/*.rs\"]),\n    deps = [\n        \"//third-party:serde\",\n        \"//third-party:tokio\",\n    ],\n    features = [\"async\", \"derive\"],\n    edition = \"2021\",\n    visibility = [\"PUBLIC\"],\n)\n\nrust_binary(\n    name = \"my_app\",\n    srcs = [\"src/main.rs\"],\n    deps = [\":my_lib\"],\n    env = {\n        \"RUST_LOG\": \"info\",\n    },\n)\n\n# Platform-specific configuration\nplatform(\n    name = \"linux-x86_64\",\n    constraint_values = [\n        \"config//os:linux\",\n        \"config//cpu:x86_64\",\n    ],\n)\n\n# Custom rule\ndef _my_rule_impl(ctx):\n    out = ctx.actions.declare_output(\"output.txt\")\n    ctx.actions.run(\n        [\"process\", ctx.attrs.src],\n        env = {\"OUT\": out.as_output()},\n    )\n    return [DefaultInfo(default_output = out)]\n\nmy_rule = rule(\n    impl = _my_rule_impl,\n    attrs = {\n        \"src\": attrs.source(),\n    },\n)\n",
            "svelte": "\x3cscript lang=\"ts\"\x3e\n    import { onMount } from 'svelte';\n\n    export let name: string = 'World';\n    let count = 0;\n    let items: string[] = [];\n\n    $: doubled = count * 2;\n    $: if (count \x3e 10) console.log('Count is high!');\n\n    function increment() {\n        count += 1;\n    }\n\n    onMount(() =\x3e {\n        items = ['Apple', 'Banana', 'Cherry'];\n    });\n\x3c/script\x3e\n\n\x3cmain\x3e\n    \x3ch1\x3eHello {name}!\x3c/h1\x3e\n    \x3cbutton on:click={increment}\x3e\n        Count: {count} (doubled: {doubled})\n    \x3c/button\x3e\n\n    \x3cul\x3e\n        {#each items as item, i}\n            \x3cli\x3e{i + 1}. {item}\x3c/li\x3e\n        {/each}\n    \x3c/ul\x3e\n\x3c/main\x3e\n\n\x3cstyle\x3e\n    main { padding: 1rem; }\n    button { background: #ff3e00; color: white; }\n\x3c/style\x3e\n",
            "textproto": "# Protocol Buffer Text Format example\nperson {\n  name: \"Alice Smith\"\n  id: 12345\n  email: \"alice@example.com\"\n\n  phones {\n    number: \"+1-555-123-4567\"\n    type: MOBILE\n  }\n  phones {\n    number: \"+1-555-987-6543\"\n    type: HOME\n  }\n\n  address {\n    street: \"123 Main Street\"\n    city: \"San Francisco\"\n    state: \"CA\"\n    zip_code: \"94102\"\n    country: \"USA\"\n  }\n\n  metadata {\n    created_at {\n      seconds: 1699900000\n      nanos: 0\n    }\n    tags: \"developer\"\n    tags: \"remote\"\n    active: true\n  }\n}\n",
            "thrift": "// Apache Thrift IDL example\nnamespace py example.thrift\nnamespace java com.example.thrift\nnamespace rs example_thrift\n\nenum Status {\n    ACTIVE = 1,\n    INACTIVE = 2,\n    PENDING = 3,\n}\n\nstruct User {\n    1: required i64 id,\n    2: required string username,\n    3: optional string email,\n    4: Status status = Status.ACTIVE,\n    5: map\x3cstring, string\x3e metadata,\n    6: list\x3cstring\x3e roles,\n}\n\nexception UserNotFound {\n    1: i64 userId,\n    2: string message,\n}\n\nservice UserService {\n    User getUser(1: i64 id) throws (1: UserNotFound notFound),\n    list\x3cUser\x3e listUsers(1: i32 limit, 2: i32 offset),\n    void createUser(1: User user),\n    bool deleteUser(1: i64 id),\n    oneway void logAction(1: string action),\n}\n",
            "toml": "[package]\nname = \"my-project\"\nversion = \"0.1.0\"\nedition = \"2021\"\npublish = false\ncreated = 2024-01-15T09:30:00Z\n\n[dependencies]\nserde = { version = \"1.0\", features = [\"derive\"] }\ntokio = { version = \"1\", features = [\"full\"] }\n\n[build]\njobs = 4\nrelease_date = 2024-06-01\n",
            "typescript": "interface User {\n    id: number;\n    name: string;\n    email: string;\n}\n\nasync function getUser(id: number): Promise\x3cUser\x3e {\n    const response = await fetch(`/api/users/${id}`);\n    return response.json();\n}\n\nconst users: User[] = [];\n",
            "typst": "// Typst document example\n#set page(paper: \"a4\", margin: 2cm)\n#set text(font: \"Linux Libertine\", size: 11pt)\n\n= Introduction\n\nThis is a #strong[Typst] document demonstrating various features.\n\n== Math Support\n\nInline math: $x^2 + y^2 = z^2$\n\nBlock equation:\n$ integral_0^infinity e^(-x^2) dif x = sqrt(pi) / 2 $\n\n== Code Blocks\n\n```rust\nfn main() {\n    println!(\"Hello, Typst!\");\n}\n```\n\n== Tables\n\n#table(\n  columns: (auto, auto, auto),\n  [*Name*], [*Age*], [*City*],\n  [Alice], [25], [Paris],\n  [Bob], [30], [London],\n)\n\n#let greet(name) = [Hello, #name!]\n#greet(\"World\")\n",
            "uiua": "# Uiua array programming language\n# Fibonacci sequence\nFib ‚Üê ‚ÜØ¬Ø1‚ç•(‚äÇ/+‚äÉ‚Üô‚Üô1 2)10 [0 1]\n\n# Matrix multiplication\nMatMul ‚Üê ‚çú‚çâ(√ó‚äô¬§)\n\n# Prime sieve\nPrimes ‚Üê ‚ñΩ¬¨‚àä‚ä∏(‚ô≠√ó‚äû√ó.)‚á°\n\n# Array operations\nNumbers ‚Üê +1‚á°10\nDoubled ‚Üê √ó2 Numbers\nSum ‚Üê /+ Numbers\n\n# String manipulation\nHello ‚Üê \"Hello, World!\"\nReversed ‚Üê ‚áå Hello\n",
            "vb": "Module Program\n    Sub Main()\n        Dim numbers As Integer() = {1, 2, 3, 4, 5}\n\n        For Each num In numbers\n            Console.WriteLine($\"Number: {num}\")\n        Next\n\n        Dim sum = numbers.Sum()\n        Console.WriteLine($\"Sum: {sum}\")\n    End Sub\nEnd Module\n",
            "verilog": "// Verilog HDL example - 4-bit counter\nmodule counter (\n    input wire clk,\n    input wire rst_n,\n    input wire enable,\n    output reg [3:0] count,\n    output wire overflow\n);\n\n    assign overflow = (count == 4'hF) \x26 enable;\n\n    always @(posedge clk or negedge rst_n) begin\n        if (!rst_n) begin\n            count \x3c= 4'b0000;\n        end else if (enable) begin\n            count \x3c= count + 1'b1;\n        end\n    end\n\nendmodule\n\n// Testbench\nmodule counter_tb;\n    reg clk, rst_n, enable;\n    wire [3:0] count;\n    wire overflow;\n\n    counter uut (.clk(clk), .rst_n(rst_n), .enable(enable),\n                 .count(count), .overflow(overflow));\n\n    initial begin\n        clk = 0;\n        forever #5 clk = ~clk;\n    end\nendmodule\n",
            "vue": "\x3ctemplate\x3e\n  \x3cdiv class=\"counter\"\x3e\n    \x3ch1\x3e{{ title }}\x3c/h1\x3e\n    \x3cp\x3eCount: {{ count }}\x3c/p\x3e\n    \x3cbutton @click=\"increment\" :disabled=\"count \x3e= max\"\x3e\n      Increment\n    \x3c/button\x3e\n    \x3cul\x3e\n      \x3cli v-for=\"item in items\" :key=\"item.id\"\x3e\n        {{ item.name }}\n      \x3c/li\x3e\n    \x3c/ul\x3e\n  \x3c/div\x3e\n\x3c/template\x3e\n\n\x3cscript setup lang=\"ts\"\x3e\nimport { ref, computed, onMounted } from 'vue';\n\ninterface Item {\n  id: number;\n  name: string;\n}\n\nconst props = defineProps\x3c{ max: number }\x3e();\nconst count = ref(0);\nconst items = ref\x3cItem[]\x3e([]);\n\nconst title = computed(() =\x3e `Counter (max: ${props.max})`);\n\nfunction increment() {\n  if (count.value \x3c props.max) count.value++;\n}\n\nonMounted(() =\x3e {\n  items.value = [{ id: 1, name: 'Apple' }, { id: 2, name: 'Banana' }];\n});\n\x3c/script\x3e\n\n\x3cstyle scoped\x3e\n.counter { padding: 1rem; }\nbutton { background: #42b883; }\n\x3c/style\x3e\n",
            "x86asm": "section .text\nglobal _start\n\n_start:\n    ; Calculate factorial of 5\n    mov ecx, 5          ; n = 5\n    mov eax, 1          ; result = 1\n\n.loop:\n    imul eax, ecx       ; result *= n\n    dec ecx             ; n--\n    jnz .loop           ; if n != 0, continue\n\n    ; Exit with result as status\n    mov ebx, eax\n    mov eax, 1\n    int 0x80\n",
            "xml": "\x3c?xml version=\"1.0\" encoding=\"UTF-8\"?\x3e\n\x3cproject xmlns=\"http://maven.apache.org/POM/4.0.0\"\x3e\n    \x3cmodelVersion\x3e4.0.0\x3c/modelVersion\x3e\n    \x3cgroupId\x3ecom.example\x3c/groupId\x3e\n    \x3cartifactId\x3emy-app\x3c/artifactId\x3e\n    \x3cversion\x3e1.0.0\x3c/version\x3e\n\n    \x3cdependencies\x3e\n        \x3cdependency\x3e\n            \x3cgroupId\x3ejunit\x3c/groupId\x3e\n            \x3cartifactId\x3ejunit\x3c/artifactId\x3e\n            \x3cversion\x3e4.13.2\x3c/version\x3e\n        \x3c/dependency\x3e\n    \x3c/dependencies\x3e\n\x3c/project\x3e\n",
            "yaml": "name: CI Pipeline\non:\n  push:\n    branches: [main]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Build and Test\n        run: |\n          cargo build --release\n          cargo test --all-features\n          echo \"Build complete!\"\n      - name: Deploy\n        if: github.ref == 'refs/heads/main'\n        env:\n          SECRET_KEY: ${{ secrets.DEPLOY_KEY }}\n        run: ./deploy.sh\n",
            "zig": "const std = @import(\"std\");\n\nfn fibonacci(n: usize) []u64 {\n    var result = std.ArrayList(u64).init(std.heap.page_allocator);\n    var a: u64 = 0;\n    var b: u64 = 1;\n\n    for (0..n) |_| {\n        result.append(a) catch unreachable;\n        const temp = a + b;\n        a = b;\n        b = temp;\n    }\n\n    return result.toOwnedSlice() catch unreachable;\n}\n\npub fn main() void {\n    const fib = fibonacci(10);\n    std.debug.print(\"{any}\\n\", .{fib});\n}\n"
        };

        let wasmLoaded = false;
        let allLanguages = [];
        let selectedLang = null;
        let highlightedIndex = 0;

        // Language picker elements
        const langPicker = document.getElementById('lang-picker');
        const langLabel = document.getElementById('lang-label');
        const langInput = document.getElementById('lang-input');
        const langDropdown = document.getElementById('lang-dropdown');

        // Fuzzy match function
        function fuzzyMatch(pattern, text) {
            pattern = pattern.toLowerCase();
            text = text.toLowerCase();

            let patternIdx = 0;
            let textIdx = 0;
            let matchPositions = [];

            while (patternIdx < pattern.length && textIdx < text.length) {
                if (pattern[patternIdx] === text[textIdx]) {
                    matchPositions.push(textIdx);
                    patternIdx++;
                }
                textIdx++;
            }

            return patternIdx === pattern.length ? matchPositions : null;
        }

        // Highlight matched characters
        function highlightMatches(text, positions) {
            if (!positions || positions.length === 0) return text;

            let result = '';
            let lastPos = 0;

            for (const pos of positions) {
                result += text.slice(lastPos, pos);
                result += `<span class="match-highlight">${text[pos]}</span>`;
                lastPos = pos + 1;
            }
            result += text.slice(lastPos);

            return result;
        }

        // Filter and render languages
        function filterLanguages(query) {
            const filtered = [];

            for (const id of allLanguages) {
                const info = languageInfo[id] || { name: id, tag: 'code' };
                const name = info.name;
                const tag = info.tag;
                const aliases = info.aliases || [];

                // Match against id, name, tag, or aliases
                const idMatch = fuzzyMatch(query, id);
                const nameMatch = fuzzyMatch(query, name);
                const tagMatch = query && tag.toLowerCase().includes(query.toLowerCase());
                // Check aliases - find best alias match
                let aliasMatch = null;
                for (const alias of aliases) {
                    const match = fuzzyMatch(query, alias);
                    if (match && (!aliasMatch || match.length < aliasMatch.length)) {
                        aliasMatch = match;
                    }
                }

                if (!query || idMatch || nameMatch || tagMatch || aliasMatch) {
                    // Calculate score - prefer exact alias matches
                    let score = 200;
                    if (nameMatch) score = nameMatch.length;
                    else if (aliasMatch) score = aliasMatch.length + 50; // Slightly deprioritize aliases
                    else if (idMatch) score = idMatch.length + 100;

                    filtered.push({
                        id,
                        name,
                        tag,
                        aliases,
                        idMatch,
                        nameMatch,
                        aliasMatch,
                        score
                    });
                }
            }

            // Sort by match quality
            filtered.sort((a, b) => a.score - b.score);

            return filtered;
        }

        // Render dropdown
        function renderDropdown(languages) {
            if (languages.length === 0) {
                langDropdown.innerHTML = '<div class="lang-dropdown-empty">No languages found</div>';
                return;
            }

            langDropdown.innerHTML = languages.map((lang, idx) => {
                const info = languageInfo[lang.id] || { name: lang.id, tag: 'code' };
                const nameHtml = lang.nameMatch
                    ? highlightMatches(info.name, lang.nameMatch)
                    : info.name;
                const idHtml = lang.idMatch
                    ? highlightMatches(lang.id, lang.idMatch)
                    : lang.id;

                // Show first alias if any
                const aliases = info.aliases || [];
                const aliasesHtml = aliases.length > 0
                    ? `<span class="lang-aliases">${aliases[0]}</span>`
                    : '';

                const isSelected = selectedLang === lang.id;
                const isHighlighted = idx === highlightedIndex;
                const icon = getIcon(lang.id);
                const iconHtml = `<iconify-icon icon="${icon || 'mdi:code-tags'}" class="lang-icon"></iconify-icon>`;

                return `
                    <div class="lang-option ${isSelected ? 'selected' : ''} ${isHighlighted ? 'highlighted' : ''}"
                         data-id="${lang.id}" data-index="${idx}">
                        ${iconHtml}
                        <span class="lang-name">${nameHtml}</span>
                        <span class="lang-id">${idHtml}</span>
                        ${aliasesHtml}
                        <span class="tag tag-${info.tag}">${info.tag}</span>
                    </div>
                `;
            }).join('');
        }

        // Update the rich label display
        function updateLabel(id) {
            const info = languageInfo[id] || { name: id, tag: 'code' };
            const icon = getIcon(id);
            const iconHtml = `<iconify-icon icon="${icon || 'mdi:code-tags'}" class="lang-icon"></iconify-icon>`;
            langLabel.innerHTML = `
                ${iconHtml}
                <span class="lang-name">${info.name}</span>
                <span class="lang-id">${id}</span>
                <span class="tag tag-${info.tag}">${info.tag}</span>
            `;
        }

        // Enter search mode
        function enterSearchMode() {
            langPicker.classList.add('searching');
            langInput.value = '';
            highlightedIndex = 0;
            const filtered = filterLanguages('');
            renderDropdown(filtered);
            langDropdown.classList.add('open');
            langInput.focus();
        }

        // Exit search mode
        function exitSearchMode() {
            langPicker.classList.remove('searching');
            langDropdown.classList.remove('open');
            langInput.blur();
        }

        // Preview a language (without committing selection)
        function previewLanguage(id) {
            // Load example if available and re-highlight
            const sourceEl = document.getElementById('source');
            if (examples[id]) {
                sourceEl.value = examples[id];
            }
            // Temporarily highlight with this language
            if (wasmLoaded) {
                const source = sourceEl.value;
                const output = document.getElementById('output');
                if (source) {
                    try {
                        const html = highlight(id, source);
                        output.innerHTML = html;
                    } catch (e) {
                        // Ignore errors during preview
                    }
                }
            }
        }

        // Select a language
        function selectLanguage(id) {
            selectedLang = id;
            updateLabel(id);
            exitSearchMode();

            // Load example if available
            if (examples[id]) {
                document.getElementById('source').value = examples[id];
            }

            doHighlight();
        }

        // Event handlers
        langLabel.addEventListener('click', () => {
            enterSearchMode();
        });

        langInput.addEventListener('input', () => {
            highlightedIndex = 0;
            const filtered = filterLanguages(langInput.value);
            renderDropdown(filtered);
        });

        langInput.addEventListener('keydown', (e) => {
            const filtered = filterLanguages(langInput.value);

            if (e.key === 'ArrowDown') {
                e.preventDefault();
                highlightedIndex = Math.min(highlightedIndex + 1, filtered.length - 1);
                renderDropdown(filtered);
                scrollToHighlighted();
                // Preview the highlighted language
                if (filtered[highlightedIndex]) {
                    previewLanguage(filtered[highlightedIndex].id);
                }
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                highlightedIndex = Math.max(highlightedIndex - 1, 0);
                renderDropdown(filtered);
                scrollToHighlighted();
                // Preview the highlighted language
                if (filtered[highlightedIndex]) {
                    previewLanguage(filtered[highlightedIndex].id);
                }
            } else if (e.key === 'Enter') {
                e.preventDefault();
                if (highlightedIndex >= 0 && highlightedIndex < filtered.length) {
                    selectLanguage(filtered[highlightedIndex].id);
                } else if (filtered.length > 0) {
                    selectLanguage(filtered[0].id);
                }
            } else if (e.key === 'Escape') {
                // Restore the previously selected language
                if (selectedLang) {
                    previewLanguage(selectedLang);
                }
                exitSearchMode();
            }
        });

        langInput.addEventListener('blur', () => {
            // Small delay to allow click events on dropdown to fire
            setTimeout(() => {
                if (!langDropdown.matches(':hover')) {
                    // Restore the previously selected language
                    if (selectedLang) {
                        previewLanguage(selectedLang);
                    }
                    exitSearchMode();
                }
            }, 150);
        });

        function scrollToHighlighted() {
            const highlighted = langDropdown.querySelector('.highlighted');
            if (highlighted) {
                highlighted.scrollIntoView({ block: 'nearest' });
            }
        }

        langDropdown.addEventListener('click', (e) => {
            const option = e.target.closest('.lang-option');
            if (option) {
                selectLanguage(option.dataset.id);
            }
        });

        langDropdown.addEventListener('mouseover', (e) => {
            const option = e.target.closest('.lang-option');
            if (option) {
                // Update highlighting without re-rendering (to preserve icons)
                const newIndex = parseInt(option.dataset.index, 10);
                if (newIndex !== highlightedIndex) {
                    // Remove old highlight
                    const oldHighlighted = langDropdown.querySelector('.highlighted');
                    if (oldHighlighted) oldHighlighted.classList.remove('highlighted');
                    // Add new highlight
                    option.classList.add('highlighted');
                    highlightedIndex = newIndex;
                }
                // Preview the hovered language
                previewLanguage(option.dataset.id);
            }
        });

        // Theme metadata: id -> { name, variant }
        const themeInfo = {
            'mocha': { name: 'Catppuccin Mocha', variant: 'dark' },
            'macchiato': { name: 'Catppuccin Macchiato', variant: 'dark' },
            'frappe': { name: 'Catppuccin Frapp√©', variant: 'dark' },
            'latte': { name: 'Catppuccin Latte', variant: 'light' },
            'tokyo-night': { name: 'Tokyo Night', variant: 'dark' },
            'dracula': { name: 'Dracula', variant: 'dark' },
            'monokai': { name: 'Monokai Pro', variant: 'dark' },
            'github-dark': { name: 'GitHub Dark', variant: 'dark' },
            'github-light': { name: 'GitHub Light', variant: 'light' },
            'one-dark': { name: 'One Dark', variant: 'dark' },
            'melange-dark': { name: 'Melange Dark', variant: 'dark' },
            'melange-light': { name: 'Melange Light', variant: 'light' },
        };

        const allThemes = Object.keys(themeInfo);
        let selectedTheme = null;
        let themeHighlightedIndex = 0;

        // Mode toggle (dark/light filter)
        let currentMode = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        const modeDarkBtn = document.getElementById('mode-dark');
        const modeLightBtn = document.getElementById('mode-light');

        // Theme pairs: dark <-> light counterparts
        const themePairs = {
            // Catppuccin family - all dark variants map to latte
            'mocha': 'latte',
            'macchiato': 'latte',
            'frappe': 'latte',
            'latte': 'mocha', // latte goes to mocha (the default dark)
            // GitHub
            'github-dark': 'github-light',
            'github-light': 'github-dark',
            // Melange
            'melange-dark': 'melange-light',
            'melange-light': 'melange-dark',
        };

        function setMode(mode) {
            currentMode = mode;
            modeDarkBtn.classList.toggle('active', mode === 'dark');
            modeLightBtn.classList.toggle('active', mode === 'light');
            localStorage.setItem('arborium-mode', mode);

            // If current theme doesn't match mode, switch to paired theme or fallback
            if (selectedTheme && themeInfo[selectedTheme].variant !== mode) {
                const pairedTheme = themePairs[selectedTheme];
                if (pairedTheme && themeInfo[pairedTheme].variant === mode) {
                    selectTheme(pairedTheme);
                } else {
                    // Fallback to first theme of that mode
                    const firstThemeOfMode = allThemes.find(id => themeInfo[id].variant === mode);
                    if (firstThemeOfMode) {
                        selectTheme(firstThemeOfMode);
                    }
                }
            }
        }

        modeDarkBtn.addEventListener('click', () => setMode('dark'));
        modeLightBtn.addEventListener('click', () => setMode('light'));

        // Theme picker elements
        const themePicker = document.getElementById('theme-picker');
        const themeLabel = document.getElementById('theme-label');
        const themeInput = document.getElementById('theme-input');
        const themeDropdown = document.getElementById('theme-dropdown');

        // Filter and render themes
        function filterThemes(query) {
            const filtered = [];

            for (const id of allThemes) {
                const info = themeInfo[id];
                const name = info.name;
                const variant = info.variant;

                // Filter by current mode (dark/light)
                if (variant !== currentMode) continue;

                // Match against id, name, or variant
                const idMatch = fuzzyMatch(query, id);
                const nameMatch = fuzzyMatch(query, name);
                const variantMatch = query && variant.toLowerCase().includes(query.toLowerCase());

                if (!query || idMatch || nameMatch || variantMatch) {
                    filtered.push({
                        id,
                        name,
                        variant,
                        idMatch,
                        nameMatch,
                        score: nameMatch ? nameMatch.length : (idMatch ? idMatch.length + 100 : 200)
                    });
                }
            }

            // Sort by match quality
            filtered.sort((a, b) => a.score - b.score);

            return filtered;
        }

        // Render theme dropdown
        function renderThemeDropdown(themes) {
            if (themes.length === 0) {
                themeDropdown.innerHTML = '<div class="theme-dropdown-empty">No themes found</div>';
                return;
            }

            themeDropdown.innerHTML = themes.map((theme, idx) => {
                const nameHtml = theme.nameMatch
                    ? highlightMatches(theme.name, theme.nameMatch)
                    : theme.name;

                const isSelected = selectedTheme === theme.id;
                const isHighlighted = idx === themeHighlightedIndex;

                return `
                    <div class="theme-option ${isSelected ? 'selected' : ''} ${isHighlighted ? 'highlighted' : ''}"
                         data-id="${theme.id}" data-index="${idx}">
                        <span class="theme-name-text">${nameHtml}</span>
                        <span class="tag tag-${theme.variant}">${theme.variant}</span>
                    </div>
                `;
            }).join('');
        }

        // Update theme label display
        function updateThemeLabel(id) {
            const info = themeInfo[id];
            themeLabel.innerHTML = `
                <span class="theme-name">${info.name}</span>
                <span class="tag tag-${info.variant}">${info.variant}</span>
            `;
        }

        // Enter theme search mode
        function enterThemeSearchMode() {
            themePicker.classList.add('searching');
            themeInput.value = '';
            themeHighlightedIndex = 0;
            const filtered = filterThemes('');
            renderThemeDropdown(filtered);
            themeDropdown.classList.add('open');
            themeInput.focus();
        }

        // Exit theme search mode
        function exitThemeSearchMode() {
            themePicker.classList.remove('searching');
            themeDropdown.classList.remove('open');
            themeInput.blur();
        }

        // Preview a theme (without committing selection)
        function previewTheme(id) {
            document.documentElement.dataset.theme = id;
        }

        // Select a theme
        function selectTheme(id) {
            selectedTheme = id;
            updateThemeLabel(id);
            exitThemeSearchMode();
            document.documentElement.dataset.theme = id;
            localStorage.setItem('arborium-theme', id);
        }

        // Theme event handlers
        themeLabel.addEventListener('click', () => {
            enterThemeSearchMode();
        });

        themeInput.addEventListener('input', () => {
            themeHighlightedIndex = 0;
            const filtered = filterThemes(themeInput.value);
            renderThemeDropdown(filtered);
        });

        themeInput.addEventListener('keydown', (e) => {
            const filtered = filterThemes(themeInput.value);

            if (e.key === 'ArrowDown') {
                e.preventDefault();
                themeHighlightedIndex = Math.min(themeHighlightedIndex + 1, filtered.length - 1);
                renderThemeDropdown(filtered);
                scrollToThemeHighlighted();
                // Preview the highlighted theme
                if (filtered[themeHighlightedIndex]) {
                    previewTheme(filtered[themeHighlightedIndex].id);
                }
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                themeHighlightedIndex = Math.max(themeHighlightedIndex - 1, 0);
                renderThemeDropdown(filtered);
                scrollToThemeHighlighted();
                // Preview the highlighted theme
                if (filtered[themeHighlightedIndex]) {
                    previewTheme(filtered[themeHighlightedIndex].id);
                }
            } else if (e.key === 'Enter') {
                e.preventDefault();
                if (themeHighlightedIndex >= 0 && themeHighlightedIndex < filtered.length) {
                    selectTheme(filtered[themeHighlightedIndex].id);
                } else if (filtered.length > 0) {
                    selectTheme(filtered[0].id);
                }
            } else if (e.key === 'Escape') {
                // Restore the previously selected theme
                if (selectedTheme) {
                    previewTheme(selectedTheme);
                }
                exitThemeSearchMode();
            }
        });

        themeInput.addEventListener('blur', () => {
            setTimeout(() => {
                if (!themeDropdown.matches(':hover')) {
                    // Restore the previously selected theme
                    if (selectedTheme) {
                        previewTheme(selectedTheme);
                    }
                    exitThemeSearchMode();
                }
            }, 150);
        });

        function scrollToThemeHighlighted() {
            const highlighted = themeDropdown.querySelector('.highlighted');
            if (highlighted) {
                highlighted.scrollIntoView({ block: 'nearest' });
            }
        }

        themeDropdown.addEventListener('click', (e) => {
            const option = e.target.closest('.theme-option');
            if (option) {
                selectTheme(option.dataset.id);
            }
        });

        themeDropdown.addEventListener('mouseover', (e) => {
            const option = e.target.closest('.theme-option');
            if (option) {
                // Update highlighting without re-rendering
                const newIndex = parseInt(option.dataset.index, 10);
                if (newIndex !== themeHighlightedIndex) {
                    // Remove old highlight
                    const oldHighlighted = themeDropdown.querySelector('.highlighted');
                    if (oldHighlighted) oldHighlighted.classList.remove('highlighted');
                    // Add new highlight
                    option.classList.add('highlighted');
                    themeHighlightedIndex = newIndex;
                }
                // Preview the hovered theme
                previewTheme(option.dataset.id);
            }
        });

        // Initialize mode and theme
        const savedMode = localStorage.getItem('arborium-mode');
        const savedTheme = localStorage.getItem('arborium-theme');

        // Set mode first (from saved, or from system preference)
        if (savedMode) {
            setMode(savedMode);
        } else {
            setMode(currentMode); // Uses system preference detected earlier
        }

        // Then set theme (if saved theme matches current mode, use it; otherwise use default for mode)
        if (savedTheme && themeInfo[savedTheme] && themeInfo[savedTheme].variant === currentMode) {
            selectTheme(savedTheme);
        } else {
            // Pick first theme matching current mode
            const defaultTheme = currentMode === 'dark' ? 'mocha' : 'latte';
            selectTheme(defaultTheme);
        }

        async function initialize() {
            try {
                await init();
                wasmLoaded = true;

                allLanguages = supported_languages();
                document.getElementById('lang-count').textContent = `${allLanguages.length} languages`;

                // Select Rust by default
                if (allLanguages.includes('rust')) {
                    selectLanguage('rust');
                } else if (allLanguages.length > 0) {
                    selectLanguage(allLanguages[0]);
                }

                updateStatus('WASM module loaded successfully', true);

            } catch (error) {
                document.getElementById('output').innerHTML = `<span class="error">Failed to load WASM: ${error}</span>`;
                updateStatus('Failed to load WASM module', false);
            }
        }

        function doHighlight() {
            if (!wasmLoaded || !selectedLang) return;

            const source = document.getElementById('source').value;
            const output = document.getElementById('output');

            if (!source) {
                output.innerHTML = '<span class="loading">Enter some code to highlight</span>';
                return;
            }

            try {
                const start = performance.now();
                const html = highlight(selectedLang, source);
                const elapsed = (performance.now() - start).toFixed(2);

                output.innerHTML = html;
                updateStatus(`Highlighted ${source.length} chars in ${elapsed}ms`, true);
            } catch (error) {
                output.innerHTML = `<span class="error">${error}</span>`;
                updateStatus('Highlighting failed', false);
            }
        }

        function updateStatus(message, success) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = success ? 'status success' : 'status';
        }

        function formatBytes(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
        }

        async function loadBundleInfo() {
            try {
                const response = await fetch('/bundle-info.json');
                const info = await response.json();
                if (info.wasm) {
                    const el = document.getElementById('bundle-size');
                    el.textContent = `${formatBytes(info.wasm.compressed)} gzipped (${formatBytes(info.wasm.raw)} uncompressed)`;
                }
            } catch (e) {
                // Ignore - bundle info not available
            }
        }

        document.getElementById('source').addEventListener('input', doHighlight);

        // Global keyboard navigation with arrow keys
        document.addEventListener('keydown', (e) => {
            // Don't handle if we're in a text input (except the picker inputs)
            const activeEl = document.activeElement;
            const isInTextarea = activeEl.tagName === 'TEXTAREA';
            const isInLangInput = activeEl === langInput;
            const isInThemeInput = activeEl === themeInput;

            // If in textarea, don't intercept arrows
            if (isInTextarea) return;

            // If in picker input, the picker's own handler will handle it
            if (isInLangInput || isInThemeInput) return;

            // Global arrow key navigation cycles through languages
            if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                e.preventDefault();
                if (!allLanguages || allLanguages.length === 0) return;

                const currentIndex = allLanguages.indexOf(selectedLang);
                let newIndex;
                if (e.key === 'ArrowDown') {
                    newIndex = (currentIndex + 1) % allLanguages.length;
                } else {
                    newIndex = (currentIndex - 1 + allLanguages.length) % allLanguages.length;
                }
                selectLanguage(allLanguages[newIndex]);
            }
        });

        initialize();
        loadBundleInfo();
    </script>
</body>
</html>
